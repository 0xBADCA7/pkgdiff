<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux aponomarenko 3.0.0-14-generic #23-Ubuntu SMP Mon Nov 21 20:28:43 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 3.1.8 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.0 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 0.6.5 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: libudev-device.c - libudev-device.c</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;libudev-device.c&nbsp;</th><th> </th><th>&nbsp;libudev-device.c&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 47</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 47</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * filesystem. Devices usually belong to a kernel subsystem, and and have</td><td> </td><td class="right"> * filesystem. Devices usually belong to a kernel subsystem, and and have</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * a unique name inside that subsystem.</td><td> </td><td class="right"> * a unique name inside that subsystem.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device:</td><td> </td><td class="right"> * udev_device:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Opaque object representing one kernel sys device.</td><td> </td><td class="right"> * Opaque object representing one kernel sys device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_device {</td><td> </td><td class="right">struct udev_device {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev *udev;</td><td> </td><td class="rblock">        struct udev *udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *parent_device;</td><td> </td><td class="rblock">        struct udev_device *parent_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *syspath;</td><td> </td><td class="rblock">        char *syspath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *devpath;</td><td> </td><td class="rblock">        const char *devpath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *sysname;</td><td> </td><td class="rblock">        char *sysname;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *sysnum;</td><td> </td><td class="rblock">        const char *sysnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *devnode;</td><td> </td><td class="rblock">        char *devnode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       mode_t devnode_mode;</td><td> </td><td class="rblock">        mode_t devnode_mode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *subsystem;</td><td> </td><td class="rblock">        char *subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *devtype;</td><td> </td><td class="rblock">        char *devtype;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *driver;</td><td> </td><td class="rblock">        char *driver;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *action;</td><td> </td><td class="rblock">        char *action;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *devpath_old;</td><td> </td><td class="rblock">        char *devpath_old;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char <span class="delete">*knodename;</span></td><td> </td><td class="rblock">        char *id_filename;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       char</span> *id_filename;</td><td> </td><td class="rblock">        char **envp;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char **envp;</td><td> </td><td class="rblock">        char *monitor_buf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *monitor_buf;</td><td> </td><td class="rblock">        size_t monitor_buf_len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size_t monitor_buf_len;</td><td> </td><td class="rblock">        struct udev_list devlinks_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list devlinks_list;</td><td> </td><td class="rblock">        struct udev_list properties_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list properties_list;</td><td> </td><td class="rblock">        struct udev_list sysattr_value_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list sysattr_value_list;</td><td> </td><td class="rblock">        struct udev_list sysattr_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list sysattr_list;</td><td> </td><td class="rblock">        struct udev_list tags_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list tags_list;</td><td> </td><td class="rblock">        unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum;</td><td> </td><td class="rblock">        unsigned long long int usec_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int usec_initialized;</td><td> </td><td class="rblock">        int devlink_priority;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">int timeout;</span></td><td> </td><td class="rblock">        int refcount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int devlink_priority;</td><td> </td><td class="rblock">        dev_t devnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int refcount;</td><td> </td><td class="rblock">        int ifindex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dev_t devnum;</td><td> </td><td class="rblock">        int watch_handle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int ifindex;</td><td> </td><td class="rblock">        int maj, min;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int watch_handle;</td><td> </td><td class="rblock">        bool parent_set;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int maj, min;</td><td> </td><td class="rblock">        bool subsystem_set;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool parent_set;</td><td> </td><td class="rblock">        bool devtype_set;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool subsystem_set;</td><td> </td><td class="rblock">        bool devlinks_uptodate;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool devtype_set;</td><td> </td><td class="rblock">        bool envp_uptodate;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool devlinks_uptodate;</td><td> </td><td class="rblock">        bool tags_uptodate;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool envp_uptodate;</td><td> </td><td class="rblock">        bool driver_set;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool tags_uptodate;</td><td> </td><td class="rblock">        bool info_loaded;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool driver_set;</td><td> </td><td class="rblock">        bool db_loaded;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool info_loaded;</td><td> </td><td class="rblock">        bool uevent_loaded;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool db_loaded;</td><td> </td><td class="rblock">        bool is_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool uevent_loaded;</td><td> </td><td class="rblock">        bool sysattr_list_read;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool is_initialized;</td><td> </td><td class="rblock">        bool db_persist;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool sysattr_list_read;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       bool db_persist;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_seqnum:</td><td> </td><td class="right"> * udev_device_get_seqnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This is only valid if the device was received through a monitor. Devices
 read from</td><td> </td><td class="right"> * This is only valid if the device was received through a monitor. Devices
 read from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * sys do not have a sequence number.</td><td> </td><td class="right"> * sys do not have a sequence number.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the kernel event sequence number, or 0 if there is no sequence 
number available.</td><td> </td><td class="right"> * Returns: the kernel event sequence number, or 0 if there is no sequence 
number available.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT unsigned long long int udev_device_get_seqnum(struct udev_devic
e *udev_device)</td><td> </td><td class="right">UDEV_EXPORT unsigned long long int udev_device_get_seqnum(struct udev_devic
e *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;seqnum;</td><td> </td><td class="rblock">        return udev_device-&gt;seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_seqnum(struct udev_device *udev_device, unsigned
 long long int seqnum)</td><td> </td><td class="right">static int udev_device_set_seqnum(struct udev_device *udev_device, unsigned
 long long int seqnum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char num[32];</td><td> </td><td class="rblock">       <span class="insert"> </span>char num[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;seqnum = seqnum;</td><td> </td><td class="rblock">        udev_device-&gt;seqnum = seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       snprintf(num, sizeof(num), "%llu", seqnum);</td><td> </td><td class="rblock">        snprintf(num, sizeof(num), "%llu", seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "SEQNUM", num);</td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "SEQNUM", num);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_get_ifindex(struct udev_device *udev_device)</td><td> </td><td class="right">int udev_device_get_ifindex(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_uevent_file(udev_device);</td><td> </td><td class="rblock">                udev_device_read_uevent_file(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;ifindex;</td><td> </td><td class="rblock">        return udev_device-&gt;ifindex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_ifindex(struct udev_device *udev_device, int ifi
ndex)</td><td> </td><td class="right">static int udev_device_set_ifindex(struct udev_device *udev_device, int ifi
ndex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char num[32];</td><td> </td><td class="rblock">       <span class="insert"> </span>char num[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;ifindex = ifindex;</td><td> </td><td class="rblock">        udev_device-&gt;ifindex = ifindex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       snprintf(num, sizeof(num), "%u", ifindex);</td><td> </td><td class="rblock">        snprintf(num, sizeof(num), "%u", ifindex);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "IFINDEX", num);</td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "IFINDEX", num);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_devnum:</td><td> </td><td class="right"> * udev_device_get_devnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the device major/minor number.</td><td> </td><td class="right"> * Returns: the device major/minor number.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT dev_t udev_device_get_devnum(struct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT dev_t udev_device_get_devnum(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return makedev(0, 0);</td><td> </td><td class="rblock">                return makedev(0, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_uevent_file(udev_device);</td><td> </td><td class="rblock">                udev_device_read_uevent_file(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devnum;</td><td> </td><td class="rblock">        return udev_device-&gt;devnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_devnum(struct udev_device *udev_device, dev_t de
vnum)</td><td> </td><td class="right">static int udev_device_set_devnum(struct udev_device *udev_device, dev_t de
vnum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char num[32];</td><td> </td><td class="rblock">        char num[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">udev_device-&gt;devnum = devnum;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       snprintf(num, sizeof(num), "%u", major(devnum));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       udev_device_add_property(udev_device, "MAJOR", num);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       snprintf(num, sizeof(num), "%u", minor(devnum));</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       udev_device_add_property(udev_device, "MINOR", num);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return 0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">int udev_device_get_timeout(struct udev_device *udev_device)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return udev_device-&gt;timeout;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">static int udev_device_set_timeout(struct udev_device *udev_device, int tim</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">eout)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       char num[32];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       udev_device-&gt;timeout = timeout;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       snprintf(num, sizeof(num), "%u", timeout);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       udev_device_add_property(udev_device, "TIMEOUT", num);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return 0;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">const char *udev_device_get_knodename(struct udev_device *udev_device)</span></td><td> </td><td class="rblock">        <span class="insert">udev_device-&gt;devnum = devnum;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       return udev_device-&gt;knodename;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">static int udev_device_set_knodename(struct udev_device *udev_device, const</span></td><td> </td><td class="rblock">        <span class="insert">snprintf(num, sizeof(num), "%u", major(devnum));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> char *knodename)</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, <span class="insert">"MAJOR", num);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">{</span></td><td> </td><td class="rblock"><span class="insert">        snprintf(num, sizeof(num), "%u", minor(devnum));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       free(udev_device-&gt;knodename);</span></td><td> </td><td class="rblock"><span class="insert">        udev_device_add_property(udev_device, "MINOR", num);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       udev_device-&gt;knodename = strdup(knodename);</span></td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if (udev_device-&gt;knodename == NULL)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               return -ENOMEM;</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       /* do not overwrite the udev property with the kernel property */</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if (udev_device-&gt;devnode == NULL)</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_add_property(udev_device, <span class="delete">"DEVNAME", udev_device</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">-&gt;knodename);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const char *udev_device_get_devpath_old(struct udev_device *udev_device)</td><td> </td><td class="right">const char *udev_device_get_devpath_old(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devpath_old;</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device-&gt;devpath_old;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_devpath_old(struct udev_device *udev_device, con
st char *devpath_old)</td><td> </td><td class="right">static int udev_device_set_devpath_old(struct udev_device *udev_device, con
st char *devpath_old)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *pos;</td><td> </td><td class="rblock">       <span class="insert"> </span>const char *pos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devpath_old);</td><td> </td><td class="rblock">        free(udev_device-&gt;devpath_old);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devpath_old = strdup(devpath_old);</td><td> </td><td class="rblock">        udev_device-&gt;devpath_old = strdup(devpath_old);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;devpath_old == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;devpath_old == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DEVPATH_OLD", <span class="delete">udev_device-&gt;de</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DEVPATH_OLD", <span class="insert">udev_device-&gt;d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">vpath_old);</span></td><td> </td><td class="rblock"><span class="insert">evpath_old);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       pos = strrchr(udev_device-&gt;devpath_old, '/');</td><td> </td><td class="rblock">        pos = strrchr(udev_device-&gt;devpath_old, '/');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (pos == NULL)</td><td> </td><td class="rblock">        if (pos == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_driver:</td><td> </td><td class="right"> * udev_device_get_driver:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the driver string, or #NULL if there is no driver attached.</td><td> </td><td class="right"> * Returns: the driver string, or #NULL if there is no driver attached.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_driver(struct udev_device *udev_dev
ice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_driver(struct udev_device *udev_dev
ice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char driver[UTIL_NAME_SIZE];</td><td> </td><td class="rblock">       <span class="insert"> </span>char driver[UTIL_NAME_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;driver_set) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;driver_set) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;driver_set = true;</td><td> </td><td class="rblock">                udev_device-&gt;driver_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (util_get_sys_core_link_value(udev_device-&gt;udev, <span class="delete">"driver"</span></td><td> </td><td class="rblock">                if (util_get_sys_core_link_value(udev_device-&gt;udev, <span class="insert">"driver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> udev_device-&gt;syspath, driver, sizeof(driver)) &gt; 0)</td><td> </td><td class="rblock"><span class="insert">",</span> udev_device-&gt;syspath, driver, sizeof(driver)) &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device-&gt;driver = strdup(driver);</td><td> </td><td class="rblock">                        udev_device-&gt;driver = strdup(driver);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;driver;</td><td> </td><td class="rblock">        return udev_device-&gt;driver;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_driver(struct udev_device *udev_device, const ch
ar *driver)</td><td> </td><td class="right">static int udev_device_set_driver(struct udev_device *udev_device, const ch
ar *driver)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;driver);</td><td> </td><td class="rblock">        free(udev_device-&gt;driver);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;driver = strdup(driver);</td><td> </td><td class="rblock">        udev_device-&gt;driver = strdup(driver);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;driver == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;driver == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;driver_set = true;</td><td> </td><td class="rblock">        udev_device-&gt;driver_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DRIVER", <span class="delete">udev_device-&gt;driver)</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DRIVER", <span class="insert">udev_device-&gt;driver</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;</span></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_devtype:</td><td> </td><td class="right"> * udev_device_get_devtype:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the devtype string of the udev device.</td><td> </td><td class="right"> * Retrieve the devtype string of the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the devtype name of the udev device, or #NULL if it can not be 
determined</td><td> </td><td class="right"> * Returns: the devtype name of the udev device, or #NULL if it can not be 
determined</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_devtype(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_devtype(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;devtype_set) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;devtype_set) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;devtype_set = true;</td><td> </td><td class="rblock">                udev_device-&gt;devtype_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_uevent_file(udev_device);</td><td> </td><td class="rblock">                udev_device_read_uevent_file(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devtype;</td><td> </td><td class="rblock">        return udev_device-&gt;devtype;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_devtype(struct udev_device *udev_device, const c
har *devtype)</td><td> </td><td class="right">static int udev_device_set_devtype(struct udev_device *udev_device, const c
har *devtype)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devtype);</td><td> </td><td class="rblock">        free(udev_device-&gt;devtype);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devtype = strdup(devtype);</td><td> </td><td class="rblock">        udev_device-&gt;devtype = strdup(devtype);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;devtype == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;devtype == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devtype_set = true;</td><td> </td><td class="rblock">        udev_device-&gt;devtype_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DEVTYPE", <span class="delete">udev_device-&gt;devtyp</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DEVTYPE", <span class="insert">udev_device-&gt;devty</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">pe);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_subsystem(struct udev_device *udev_device, const
 char *subsystem)</td><td> </td><td class="right">static int udev_device_set_subsystem(struct udev_device *udev_device, const
 char *subsystem)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;subsystem);</td><td> </td><td class="rblock">        free(udev_device-&gt;subsystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;subsystem = strdup(subsystem);</td><td> </td><td class="rblock">        udev_device-&gt;subsystem = strdup(subsystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;subsystem == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;subsystem == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;subsystem_set = true;</td><td> </td><td class="rblock">        udev_device-&gt;subsystem_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "SUBSYSTEM", <span class="delete">udev_device-&gt;subs</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "SUBSYSTEM", <span class="insert">udev_device-&gt;sub</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ystem);</span></td><td> </td><td class="rblock"><span class="insert">system);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_subsystem:</td><td> </td><td class="right"> * udev_device_get_subsystem:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the subsystem string of the udev device. The string does not</td><td> </td><td class="right"> * Retrieve the subsystem string of the udev device. The string does not</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * contain any "/".</td><td> </td><td class="right"> * contain any "/".</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the subsystem name of the udev device, or #NULL if it can not b
e determined</td><td> </td><td class="right"> * Returns: the subsystem name of the udev device, or #NULL if it can not b
e determined</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_subsystem(struct udev_device *udev_
device)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_subsystem(struct udev_device *udev_
device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char subsystem[UTIL_NAME_SIZE];</td><td> </td><td class="rblock">       <span class="insert"> </span>char subsystem[UTIL_NAME_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;subsystem_set) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;subsystem_set) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;subsystem_set = true;</td><td> </td><td class="rblock">                udev_device-&gt;subsystem_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* read "subsystem" link */</td><td> </td><td class="rblock">                /* read "subsystem" link */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (util_get_sys_core_link_value(udev_device-&gt;udev, <span class="delete">"subsyst</span></td><td> </td><td class="rblock">                if (util_get_sys_core_link_value(udev_device-&gt;udev, <span class="insert">"subsys</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">em",</span> udev_device-&gt;syspath, subsystem, sizeof(subsystem)) &gt; 0) {</td><td> </td><td class="rblock"><span class="insert">tem",</span> udev_device-&gt;syspath, subsystem, sizeof(subsystem)) &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_subsystem(udev_device, subsystem);</td><td> </td><td class="rblock">                        udev_device_set_subsystem(udev_device, subsystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return udev_device-&gt;subsystem;</td><td> </td><td class="rblock">                        return udev_device-&gt;subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* implicit names */</td><td> </td><td class="rblock">                /* implicit names */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strncmp(udev_device-&gt;devpath, "/module/", 8) == 0) {</td><td> </td><td class="rblock">                if (strncmp(udev_device-&gt;devpath, "/module/", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_subsystem(udev_device, "module");</td><td> </td><td class="rblock">                        udev_device_set_subsystem(udev_device, "module");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return udev_device-&gt;subsystem;</td><td> </td><td class="rblock">                        return udev_device-&gt;subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strstr(udev_device-&gt;devpath, "/drivers/") != NULL) {</td><td> </td><td class="rblock">                if (strstr(udev_device-&gt;devpath, "/drivers/") != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_subsystem(udev_device, "drivers");</td><td> </td><td class="rblock">                        udev_device_set_subsystem(udev_device, "drivers");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return udev_device-&gt;subsystem;</td><td> </td><td class="rblock">                        return udev_device-&gt;subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strncmp(udev_device-&gt;devpath, "/subsystem/", 11) == 0 <span class="delete">||</span></td><td> </td><td class="rblock">                if (strncmp(udev_device-&gt;devpath, "/subsystem/", 11) == 0 <span class="insert">|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   strncmp(udev_device-&gt;devpath, "/class/", 7) == 0 ||</td><td> </td><td class="rblock"><span class="insert">|</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   strncmp(udev_device-&gt;devpath, "/bus/", 5) == 0) {</td><td> </td><td class="rblock">                    strncmp(udev_device-&gt;devpath, "/class/", 7) == 0 ||</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_subsystem(udev_device, <span class="delete">"subsystem");</span></td><td> </td><td class="rblock">                    strncmp(udev_device-&gt;devpath, "/bus/", 5) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return udev_device-&gt;subsystem;</td><td> </td><td class="rblock">                        udev_device_set_subsystem(udev_device, <span class="insert">"subsystem")</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">                        return udev_device-&gt;subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;subsystem;</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return udev_device-&gt;subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">mode_t udev_device_get_devnode_mode(struct udev_device *udev_device)</td><td> </td><td class="right">mode_t udev_device_get_devnode_mode(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_uevent_file(udev_device);</td><td> </td><td class="rblock">                udev_device_read_uevent_file(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devnode_mode;</td><td> </td><td class="rblock">        return udev_device-&gt;devnode_mode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_set_devnode_mode(struct udev_device *udev_device, mo
de_t mode)</td><td> </td><td class="right">static int udev_device_set_devnode_mode(struct udev_device *udev_device, mo
de_t mode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char num[32];</td><td> </td><td class="rblock">       <span class="insert"> </span>char num[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devnode_mode = mode;</td><td> </td><td class="rblock">        udev_device-&gt;devnode_mode = mode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       snprintf(num, sizeof(num), "%#o", mode);</td><td> </td><td class="rblock">        snprintf(num, sizeof(num), "%#o", mode);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DEVMODE", num);</td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DEVMODE", num);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_list_entry *udev_device_add_property(struct udev_device *udev_d
evice, const char *key, const char *value)</td><td> </td><td class="right">struct udev_list_entry *udev_device_add_property(struct udev_device *udev_d
evice, const char *key, const char *value)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;envp_uptodate = false;</td><td> </td><td class="rblock">        udev_device-&gt;envp_uptodate = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (value == NULL) {</td><td> </td><td class="rblock">        if (value == NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">                struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               list_entry = <span class="delete">udev_device_get_properties_list_entry(udev_devi</span></td><td> </td><td class="rblock">                list_entry = <span class="insert">udev_device_get_properties_list_entry(udev_dev</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ce);</span></td><td> </td><td class="rblock"><span class="insert">ice);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               list_entry = udev_list_entry_get_by_name(list_entry, key);</td><td> </td><td class="rblock">                list_entry = udev_list_entry_get_by_name(list_entry, key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (list_entry != NULL)</td><td> </td><td class="rblock">                if (list_entry != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_delete(list_entry);</td><td> </td><td class="rblock">                        udev_list_entry_delete(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_entry_add(&amp;udev_device-&gt;properties_list, key, <span class="delete">value</span></td><td> </td><td class="rblock">        return udev_list_entry_add(&amp;udev_device-&gt;properties_list, key, <span class="insert">valu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"><span class="insert">e);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static struct udev_list_entry *udev_device_add_property_from_string(struct 
udev_device *udev_device, const char *property)</td><td> </td><td class="right">static struct udev_list_entry *udev_device_add_property_from_string(struct 
udev_device *udev_device, const char *property)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char name[UTIL_LINE_SIZE];</td><td> </td><td class="rblock">        char name[UTIL_LINE_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *val;</td><td> </td><td class="rblock">        char *val;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpy(name, sizeof(name), property);</td><td> </td><td class="rblock">        util_strscpy(name, sizeof(name), property);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       val = strchr(name, '=');</td><td> </td><td class="rblock">        val = strchr(name, '=');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (val == NULL)</td><td> </td><td class="rblock">        if (val == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       val[0] = '\0';</td><td> </td><td class="rblock">        val[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       val = &amp;val[1];</td><td> </td><td class="rblock">        val = &amp;val[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (val[0] == '\0')</td><td> </td><td class="rblock">        if (val[0] == '\0')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               val = NULL;</td><td> </td><td class="rblock">                val = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device_add_property(udev_device, name, val);</td><td> </td><td class="rblock">        return udev_device_add_property(udev_device, name, val);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/*</td><td> </td><td class="right">/*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * parse property string, and if needed, update internal values accordingly</td><td> </td><td class="right"> * parse property string, and if needed, update internal values accordingly</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_add_property_from_string_parse_finish() needs to be</td><td> </td><td class="right"> * udev_device_add_property_from_string_parse_finish() needs to be</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * called after adding properties, and its return value checked</td><td> </td><td class="right"> * called after adding properties, and its return value checked</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_set_info_loaded() needs to be set, to avoid trying</td><td> </td><td class="right"> * udev_device_set_info_loaded() needs to be set, to avoid trying</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * to use a device without a DEVPATH set</td><td> </td><td class="right"> * to use a device without a DEVPATH set</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_add_property_from_string_parse(struct udev_device *udev_de
vice, const char *property)</td><td> </td><td class="right">void udev_device_add_property_from_string_parse(struct udev_device *udev_de
vice, const char *property)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strncmp(property, "DEVPATH=", 8) == 0) {</td><td> </td><td class="rblock">        if (strncmp(property, "DEVPATH=", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, sizeof(path), <span class="delete">udev_get_sys_path(udev_dev</span></td><td> </td><td class="rblock">                util_strscpyl(path, sizeof(path), <span class="insert">udev_get_sys_path(udev_de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ice-&gt;udev),</span> &amp;property[8], NULL);</td><td> </td><td class="rblock"><span class="insert">vice-&gt;udev),</span> &amp;property[8], NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_syspath(udev_device, path);</td><td> </td><td class="rblock">                udev_device_set_syspath(udev_device, path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "SUBSYSTEM=", 10) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "SUBSYSTEM=", 10) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_subsystem(udev_device, &amp;property[10]);</td><td> </td><td class="rblock">                udev_device_set_subsystem(udev_device, &amp;property[10]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DEVTYPE=", 8) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "DEVTYPE=", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_devtype(udev_device, &amp;property[8]);</td><td> </td><td class="rblock">                udev_device_set_devtype(udev_device, &amp;property[8]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DEVNAME=", 8) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "DEVNAME=", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">if (property[8] == '/')</span></td><td> </td><td class="rblock">                udev_device_set_devnode(udev_device, &amp;property[8]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_devnode(udev_device, &amp;property[8]);</td><td> </td><td class="rblock">        } else if (strncmp(property, "DEVLINKS=", 9) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">else</span></td><td> </td><td class="rblock">                char devlinks[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       udev_device_set_knodename(udev_device, &amp;property[8])</span></td><td> </td><td class="rblock">                char *slink;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;</span></td><td> </td><td class="rblock">                char *next;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DEVLINKS=", 9) == 0) {</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char devlinks[UTIL_PATH_SIZE];</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *slink;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *next;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpy(devlinks, sizeof(devlinks), &amp;property[9]);</td><td> </td><td class="rblock">                util_strscpy(devlinks, sizeof(devlinks), &amp;property[9]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               slink = devlinks;</td><td> </td><td class="rblock">                slink = devlinks;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               next = strchr(slink, ' ');</td><td> </td><td class="rblock">                next = strchr(slink, ' ');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               while (next != NULL) {</td><td> </td><td class="rblock">                while (next != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       next[0] = '\0';</td><td> </td><td class="rblock">                        next[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_devlink(udev_device, slink, 0);</td><td> </td><td class="rblock">                        udev_device_add_devlink(udev_device, slink, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       slink = &amp;next[1];</td><td> </td><td class="rblock">                        slink = &amp;next[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       next = strchr(slink, ' ');</td><td> </td><td class="rblock">                        next = strchr(slink, ' ');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (slink[0] != '\0')</td><td> </td><td class="rblock">                if (slink[0] != '\0')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_devlink(udev_device, slink, 0);</td><td> </td><td class="rblock">                        udev_device_add_devlink(udev_device, slink, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "TAGS=", 5) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "TAGS=", 5) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char tags[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char tags[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *next;</td><td> </td><td class="rblock">                char *next;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpy(tags, sizeof(tags), &amp;property[5]);</td><td> </td><td class="rblock">                util_strscpy(tags, sizeof(tags), &amp;property[5]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               next = strchr(tags, ':');</td><td> </td><td class="rblock">                next = strchr(tags, ':');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (next != NULL) {</td><td> </td><td class="rblock">                if (next != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       next++;</td><td> </td><td class="rblock">                        next++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       while (next[0] != '\0') {</td><td> </td><td class="rblock">                        while (next[0] != '\0') {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               char *tag;</td><td> </td><td class="rblock">                                char *tag;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               tag = next;</td><td> </td><td class="rblock">                                tag = next;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               next = strchr(tag, ':');</td><td> </td><td class="rblock">                                next = strchr(tag, ':');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (next == NULL)</td><td> </td><td class="rblock">                                if (next == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       break;</td><td> </td><td class="rblock">                                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               next[0] = '\0';</td><td> </td><td class="rblock">                                next[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               next++;</td><td> </td><td class="rblock">                                next++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               udev_device_add_tag(udev_device, tag);</td><td> </td><td class="rblock">                                udev_device_add_tag(udev_device, tag);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       }</td><td> </td><td class="rblock">                        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "USEC_INITIALIZED=", 19) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "USEC_INITIALIZED=", 19) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_usec_initialized(udev_device, <span class="delete">strtoull(&amp;prop</span></td><td> </td><td class="rblock">                udev_device_set_usec_initialized(udev_device, <span class="insert">strtoull(&amp;pro</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">erty[19],</span> NULL, 10));</td><td> </td><td class="rblock"><span class="insert">perty[19],</span> NULL, 10));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DRIVER=", 7) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "DRIVER=", 7) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_driver(udev_device, &amp;property[7]);</td><td> </td><td class="rblock">                udev_device_set_driver(udev_device, &amp;property[7]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "ACTION=", 7) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "ACTION=", 7) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_action(udev_device, &amp;property[7]);</td><td> </td><td class="rblock">                udev_device_set_action(udev_device, &amp;property[7]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "MAJOR=", 6) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "MAJOR=", 6) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;maj = strtoull(&amp;property[6], NULL, 10);</td><td> </td><td class="rblock">                udev_device-&gt;maj = strtoull(&amp;property[6], NULL, 10);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "MINOR=", 6) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "MINOR=", 6) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;min = strtoull(&amp;property[6], NULL, 10);</td><td> </td><td class="rblock">                udev_device-&gt;min = strtoull(&amp;property[6], NULL, 10);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DEVPATH_OLD=", 12) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "DEVPATH_OLD=", 12) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_devpath_old(udev_device, &amp;property[12]);</td><td> </td><td class="rblock">                udev_device_set_devpath_old(udev_device, &amp;property[12]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "SEQNUM=", 7) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "SEQNUM=", 7) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_seqnum(udev_device, strtoull(&amp;property[7], <span class="delete">N</span></td><td> </td><td class="rblock">                udev_device_set_seqnum(udev_device, strtoull(&amp;property[7], </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ULL, 10));</span></td><td> </td><td class="rblock">NULL, 10));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       } else if (strncmp(property, "TIMEOUT=", 8) == 0) {</span></td><td> </td><td class="rblock">        } else if (strncmp(property, "IFINDEX=", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               udev_device_set_timeout(udev_device, strtoull(&amp;property[8],</span> </td><td> </td><td class="rblock">                udev_device_set_ifindex(udev_device, strtoull(&amp;property[8],</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">NULL, 10));</td><td> </td><td class="rblock"> NULL, 10));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "IFINDEX=", 8) == 0) {</td><td> </td><td class="rblock">        } else if (strncmp(property, "DEVMODE=", 8) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_ifindex(udev_device, strtoull(&amp;property[8], </td><td> </td><td class="rblock">                udev_device_set_devnode_mode(udev_device, <span class="insert">strtoul(&amp;property</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">NULL, 10));</td><td> </td><td class="rblock"><span class="insert">[8],</span> NULL, 8));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else if (strncmp(property, "DEVMODE=", 8) == 0) {</td><td> </td><td class="rblock">        } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_devnode_mode(udev_device, <span class="delete">strtoul(&amp;property[</span></td><td> </td><td class="rblock">                udev_device_add_property_from_string(udev_device, <span class="insert">property)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">8],</span> NULL, 8));</td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_add_property_from_string(udev_device, <span class="delete">property);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_add_property_from_string_parse_finish(struct udev_device *u
dev_device)</td><td> </td><td class="right">int udev_device_add_property_from_string_parse_finish(struct udev_device *u
dev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;maj &gt; 0)</td><td> </td><td class="rblock">        if (udev_device-&gt;maj &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_set_devnum(udev_device, <span class="delete">makedev(udev_device-&gt;maj</span></td><td> </td><td class="rblock">                udev_device_set_devnum(udev_device, <span class="insert">makedev(udev_device-&gt;ma</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> udev_device-&gt;min));</td><td> </td><td class="rblock"><span class="insert">j,</span> udev_device-&gt;min));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;maj = 0;</td><td> </td><td class="rblock">        udev_device-&gt;maj = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;min = 0;</td><td> </td><td class="rblock">        udev_device-&gt;min = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;devpath == NULL || udev_device-&gt;subsystem == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;devpath == NULL || udev_device-&gt;subsystem == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_property_value:</td><td> </td><td class="right"> * udev_device_get_property_value:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @key: property name</td><td> </td><td class="right"> * @key: property name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the value of a device property, or #NULL if there is no such pr
operty.</td><td> </td><td class="right"> * Returns: the value of a device property, or #NULL if there is no such pr
operty.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_property_value(struct udev_device *
udev_device, const char *key)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_property_value(struct udev_device *
udev_device, const char *key)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">       <span class="insert"> </span>struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (key == NULL)</td><td> </td><td class="rblock">        if (key == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_device_get_properties_list_entry(udev_device);</td><td> </td><td class="rblock">        list_entry = udev_device_get_properties_list_entry(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_list_entry_get_by_name(list_entry, key);</td><td> </td><td class="rblock">        list_entry = udev_list_entry_get_by_name(list_entry, key);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_entry_get_value(list_entry);</td><td> </td><td class="rblock">        return udev_list_entry_get_value(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_read_db(struct udev_device *udev_device, const char *dbfile
)</td><td> </td><td class="right">int udev_device_read_db(struct udev_device *udev_device, const char *dbfile
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char filename[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char filename[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char line[UTIL_LINE_SIZE];</td><td> </td><td class="rblock">        char line[UTIL_LINE_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *f;</td><td> </td><td class="rblock">        FILE *f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* providing a database file will always force-load it */</td><td> </td><td class="rblock">        /* providing a database file will always force-load it */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (dbfile == NULL) {</td><td> </td><td class="rblock">        if (dbfile == NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const char *id;</td><td> </td><td class="rblock">                const char *id;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device-&gt;db_loaded)</td><td> </td><td class="rblock">                if (udev_device-&gt;db_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return 0;</td><td> </td><td class="rblock">                        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;db_loaded = true;</td><td> </td><td class="rblock">                udev_device-&gt;db_loaded = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               id = udev_device_get_id_filename(udev_device);</td><td> </td><td class="rblock">                id = udev_device_get_id_filename(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (id == NULL)</td><td> </td><td class="rblock">                if (id == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return -1;</td><td> </td><td class="rblock">                        return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(filename, sizeof(filename), <span class="delete">udev_get_run_path(</span></td><td> </td><td class="rblock">                util_strscpyl(filename, sizeof(filename), <span class="insert">udev_get_run_path</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">udev_device-&gt;udev),</span> "/data/", id, NULL);</td><td> </td><td class="rblock"><span class="insert">(udev_device-&gt;udev),</span> "/data/", id, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbfile = filename;</td><td> </td><td class="rblock">                dbfile = filename;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       f = fopen(dbfile, "re");</td><td> </td><td class="rblock">        f = fopen(dbfile, "re");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (f == NULL) {</td><td> </td><td class="rblock">        if (f == NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               info(udev_device-&gt;udev, "no db file to read %s: %m\n", <span class="delete">dbfil</span></td><td> </td><td class="rblock">                info(udev_device-&gt;udev, "no db file to read %s: %m\n", <span class="insert">dbfi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">le);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;is_initialized = true;</td><td> </td><td class="rblock">        udev_device-&gt;is_initialized = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       while (fgets(line, sizeof(line), f)) {</td><td> </td><td class="rblock">        while (fgets(line, sizeof(line), f)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ssize_t len;</td><td> </td><td class="rblock">                ssize_t len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const char *val;</td><td> </td><td class="rblock">                const char *val;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_list_entry *entry;</td><td> </td><td class="rblock">                struct udev_list_entry *entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               len = strlen(line);</td><td> </td><td class="rblock">                len = strlen(line);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (len &lt; 4)</td><td> </td><td class="rblock">                if (len &lt; 4)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               line[len-1] = '\0';</td><td> </td><td class="rblock">                line[len-1] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               val = &amp;line[2];</td><td> </td><td class="rblock">                val = &amp;line[2];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               switch(line[0]) {</td><td> </td><td class="rblock">                switch(line[0]) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case <span class="delete">'N':</span></td><td> </td><td class="rblock">                case 'S':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       util_strscpyl(filename, sizeof(filename), udev_get_d</span></td><td> </td><td class="rblock">                        util_strscpyl(filename, sizeof(filename), <span class="insert">udev_get_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ev_path(udev_device-&gt;udev), "/", val, NULL);</span></td><td> </td><td class="rblock"><span class="insert">dev_path(udev_device-&gt;udev),</span> "/", val, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       udev_device_set_devnode(udev_device, filename);</span></td><td> </td><td class="rblock">                        udev_device_add_devlink(udev_device, filename, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       break;</span></td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               case</span> 'S':</td><td> </td><td class="rblock">                case 'L':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       util_strscpyl(filename, sizeof(filename), <span class="delete">udev_get_d</span></td><td> </td><td class="rblock">                        udev_device_set_devlink_priority(udev_device, <span class="insert">atoi(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ev_path(udev_device-&gt;udev),</span> "/", val, NULL);</td><td> </td><td class="rblock"><span class="insert">val));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_devlink(udev_device, filename, 0);</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                case 'E':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case 'L':</td><td> </td><td class="rblock">                        entry = <span class="insert">udev_device_add_property_from_string(udev_d</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_devlink_priority(udev_device, <span class="delete">atoi(v</span></td><td> </td><td class="rblock"><span class="insert">evice,</span> val);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">al));</span></td><td> </td><td class="rblock">                        udev_list_entry_set_num(entry, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case 'E':</td><td> </td><td class="rblock">                case 'G':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       entry = <span class="delete">udev_device_add_property_from_string(udev_de</span></td><td> </td><td class="rblock">                        udev_device_add_tag(udev_device, val);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">vice,</span> val);</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_set_num(entry, true);</td><td> </td><td class="rblock">                case 'W':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        udev_device_set_watch_handle(udev_device, <span class="insert">atoi(val)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case 'G':</td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_tag(udev_device, val);</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                case 'I':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case 'W':</td><td> </td><td class="rblock">                        udev_device_set_usec_initialized(udev_device, <span class="insert">strto</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_watch_handle(udev_device, <span class="delete">atoi(val))</span></td><td> </td><td class="rblock"><span class="insert">ull(val,</span> NULL, 10));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;</span></td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               case 'I':</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_usec_initialized(udev_device, <span class="delete">strtou</span></td><td> </td><td class="rblock">        fclose(f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ll(val,</span> NULL, 10));</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(f);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       info(udev_device-&gt;udev, "device %p filled with db file data\n", <span class="delete">udev</span></td><td> </td><td class="rblock">        info(udev_device-&gt;udev, "device %p filled with db file data\n", <span class="insert">ude</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_device);</span></td><td> </td><td class="rblock"><span class="insert">v_device);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_read_uevent_file(struct udev_device *udev_device)</td><td> </td><td class="right">int udev_device_read_uevent_file(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char filename[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char filename[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *f;</td><td> </td><td class="rblock">        FILE *f;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char line[UTIL_LINE_SIZE];</td><td> </td><td class="rblock">        char line[UTIL_LINE_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int maj = 0;</td><td> </td><td class="rblock">        int maj = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int min = 0;</td><td> </td><td class="rblock">        int min = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;uevent_loaded)</td><td> </td><td class="rblock">        if (udev_device-&gt;uevent_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(filename, sizeof(filename), udev_device-&gt;syspath, <span class="delete">"/ue</span></td><td> </td><td class="rblock">        util_strscpyl(filename, sizeof(filename), udev_device-&gt;syspath, <span class="insert">"/u</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">vent",</span> NULL);</td><td> </td><td class="rblock"><span class="insert">event",</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       f = fopen(filename, "re");</td><td> </td><td class="rblock">        f = fopen(filename, "re");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (f == NULL)</td><td> </td><td class="rblock">        if (f == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;uevent_loaded = true;</td><td> </td><td class="rblock">        udev_device-&gt;uevent_loaded = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       while (fgets(line, sizeof(line), f)) {</td><td> </td><td class="rblock">        while (fgets(line, sizeof(line), f)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *pos;</td><td> </td><td class="rblock">                char *pos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pos = strchr(line, '\n');</td><td> </td><td class="rblock">                pos = strchr(line, '\n');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (pos == NULL)</td><td> </td><td class="rblock">                if (pos == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       continue;</td><td> </td><td class="rblock">                        continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pos[0] = '\0';</td><td> </td><td class="rblock">                pos[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strncmp(line, "DEVTYPE=", 8) == 0)</td><td> </td><td class="rblock">                if (strncmp(line, "DEVTYPE=", 8) == 0) <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_devtype(udev_device, &amp;line[8]);</td><td> </td><td class="rblock">                        udev_device_set_devtype(udev_device, &amp;line[8]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">else if (strncmp(line, "MAJOR=", 6) == 0)</span></td><td> </td><td class="rblock">                        <span class="insert">continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       maj = strtoull(&amp;line[6], NULL, 10);</span></td><td> </td><td class="rblock"><span class="insert">                }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               else if (strncmp(line, "MINOR=", 6) == 0)</span></td><td> </td><td class="rblock">                if (strncmp(line, "IFINDEX=", 8) == 0) <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       min = strtoull(&amp;line[6], NULL, 10);</span></td><td> </td><td class="rblock">                        udev_device_set_ifindex(udev_device, <span class="insert">strtoull(&amp;line</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               else</span> if (strncmp(line, "IFINDEX=", 8) == 0)</td><td> </td><td class="rblock"><span class="insert">[8],</span> NULL, 10));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_set_ifindex(udev_device, <span class="delete">strtoull(&amp;line[</span></td><td> </td><td class="rblock">                        <span class="insert">continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">8],</span> NULL, 10));</td><td> </td><td class="rblock"><span class="insert">                }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">else</span> if (strncmp(line, "DEVNAME=", 8) == 0)</td><td> </td><td class="rblock">                if (strncmp(line, "DEVNAME=", 8) == 0) <span class="insert">{</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       <span class="delete">udev_device_set_knodename(udev_device,</span> &amp;line[8]);</td><td> </td><td class="rblock"><span class="insert">                        udev_device_set_devnode(udev_device,</span> &amp;line[8]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">else if (strncmp(line, "DEVMODE=", 8) == 0)</span></td><td> </td><td class="rblock">                        <span class="insert">continue;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                       udev_device-&gt;devnode_mode = strtoul(&amp;line[8], NULL, </span></td><td> </td><td class="rblock"><span class="insert">                }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">8);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               <span class="delete">udev_device_add_property_from_string(udev_device, line);</span></td><td> </td><td class="rblock">                <span class="insert">if (strncmp(line, "MAJOR=", 6) == 0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"><span class="insert">                        maj = strtoull(&amp;line[6], NULL, 10);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                else if (strncmp(line, "MINOR=", 6) == 0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        min = strtoull(&amp;line[6], NULL, 10);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                else if (strncmp(line, "DEVMODE=", 8) == 0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        udev_device-&gt;devnode_mode = strtoul(&amp;line[8], NULL,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"> 8);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devnum = makedev(maj, min);</td><td> </td><td class="rblock">                <span class="insert">udev_device_add_property_from_string(udev_device, line);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(f);</td><td> </td><td class="rblock"><span class="insert">        }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        udev_device-&gt;devnum = makedev(maj, min);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        fclose(f);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_set_info_loaded(struct udev_device *device)</td><td> </td><td class="right">void udev_device_set_info_loaded(struct udev_device *device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       device-&gt;info_loaded = true;</td><td> </td><td class="rblock">       <span class="insert"> </span>device-&gt;info_loaded = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_device *udev_device_new(struct udev *udev)</td><td> </td><td class="right">struct udev_device *udev_device_new(struct udev *udev)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *udev_device;</td><td> </td><td class="rblock">        struct udev_device *udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">        struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev == NULL)</td><td> </td><td class="rblock">        if (udev == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device = calloc(1, sizeof(struct udev_device));</td><td> </td><td class="rblock">        udev_device = calloc(1, sizeof(struct udev_device));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;refcount = 1;</td><td> </td><td class="rblock">        udev_device-&gt;refcount = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;udev = udev;</td><td> </td><td class="rblock">        udev_device-&gt;udev = udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_device-&gt;devlinks_list, true);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_device-&gt;devlinks_list, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_device-&gt;properties_list, true);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_device-&gt;properties_list, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_device-&gt;sysattr_value_list, true);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_device-&gt;sysattr_value_list, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_device-&gt;sysattr_list, false);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_device-&gt;sysattr_list, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_device-&gt;tags_list, true);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_device-&gt;tags_list, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">udev_device-&gt;timeout = -1;</span></td><td> </td><td class="rblock">        udev_device-&gt;watch_handle = -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;watch_handle = -1;</td><td> </td><td class="rblock">        /* copy global properties */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* copy global properties */</td><td> </td><td class="rblock">        udev_list_entry_foreach(list_entry, <span class="insert">udev_get_properties_list_entry(</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_entry_foreach(list_entry, <span class="delete">udev_get_properties_list_entry(u</span></td><td> </td><td class="rblock"><span class="insert">udev))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">dev))</span></td><td> </td><td class="rblock">                udev_device_add_property(udev_device,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_add_property(udev_device,</td><td> </td><td class="rblock">                                         <span class="insert">udev_list_entry_get_name(list_entr</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                        <span class="delete">udev_list_entry_get_name(list_entry</span></td><td> </td><td class="rblock"><span class="insert">y),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">),</span></td><td> </td><td class="rblock"><span class="insert">                                         udev_list_entry_get_value(list_ent</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                        udev_list_entry_get_value(list_entr</span></td><td> </td><td class="rblock"><span class="insert">ry));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">y));</span></td><td> </td><td class="rblock">        dbg(udev_device-&gt;udev, "udev_device: %p created\n", udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_device-&gt;udev, "udev_device: %p created\n", udev_device);</td><td> </td><td class="rblock">        return udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_new_from_syspath:</td><td> </td><td class="right"> * udev_device_new_from_syspath:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev: udev library context</td><td> </td><td class="right"> * @udev: udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @syspath: sys device path including sys directory</td><td> </td><td class="right"> * @syspath: sys device path including sys directory</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Create new udev device, and fill in information from the sys</td><td> </td><td class="right"> * Create new udev device, and fill in information from the sys</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device and the udev database entry. The syspath is the absolute</td><td> </td><td class="right"> * device and the udev database entry. The syspath is the absolute</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * path to the device, including the sys mount point.</td><td> </td><td class="right"> * path to the device, including the sys mount point.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The initial refcount is 1, and needs to be decremented to</td><td> </td><td class="right"> * The initial refcount is 1, and needs to be decremented to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * release the resources of the udev device.</td><td> </td><td class="right"> * release the resources of the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL, if it does not exist</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL, if it does not exist</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_new_from_syspath(struct udev *u
dev, const char *syspath)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_new_from_syspath(struct udev *u
dev, const char *syspath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size_t len;</td><td> </td><td class="rblock">        size_t len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *subdir;</td><td> </td><td class="rblock">        const char *subdir;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *pos;</td><td> </td><td class="rblock">        char *pos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct stat statbuf;</td><td> </td><td class="rblock">        struct stat statbuf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *udev_device;</td><td> </td><td class="rblock">        struct udev_device *udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev == NULL)</td><td> </td><td class="rblock">        if (udev == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (syspath == NULL)</td><td> </td><td class="rblock">        if (syspath == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* path starts in sys */</td><td> </td><td class="rblock">        /* path starts in sys */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       len = strlen(udev_get_sys_path(udev));</td><td> </td><td class="rblock">        len = strlen(udev_get_sys_path(udev));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strncmp(syspath, udev_get_sys_path(udev), len) != 0) {</td><td> </td><td class="rblock">        if (strncmp(syspath, udev_get_sys_path(udev), len) != 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               info(udev, "not in sys :%s\n", syspath);</td><td> </td><td class="rblock">                info(udev, "not in sys :%s\n", syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* path is not a root directory */</td><td> </td><td class="rblock">        /* path is not a root directory */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       subdir = &amp;syspath[len+1];</td><td> </td><td class="rblock">        subdir = &amp;syspath[len+1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       pos = strrchr(subdir, '/');</td><td> </td><td class="rblock">        pos = strrchr(subdir, '/');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (pos == NULL || pos[1] == '\0' || pos &lt; &amp;subdir[2]) {</td><td> </td><td class="rblock">        if (pos == NULL || pos[1] == '\0' || pos &lt; &amp;subdir[2]) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev, "not a subdir :%s\n", syspath);</td><td> </td><td class="rblock">                dbg(udev, "not a subdir :%s\n", syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* resolve possible symlink to real path */</td><td> </td><td class="rblock">        /* resolve possible symlink to real path */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpy(path, sizeof(path), syspath);</td><td> </td><td class="rblock">        util_strscpy(path, sizeof(path), syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_resolve_sys_link(udev, path, sizeof(path));</td><td> </td><td class="rblock">        util_resolve_sys_link(udev, path, sizeof(path));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0066" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strncmp(&amp;path[len], "/devices/", 9) == 0) {</td><td> </td><td class="rblock">        if (strncmp(&amp;path[len], "/devices/", 9) == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char file[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char file[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0067" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* all "devices" require a "uevent" file */</td><td> </td><td class="rblock">                /* all "devices" require a "uevent" file */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(file, sizeof(file), path, "/uevent", NULL);</td><td> </td><td class="rblock">                util_strscpyl(file, sizeof(file), path, "/uevent", NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(file, &amp;statbuf) != 0) {</td><td> </td><td class="rblock">                if (stat(file, &amp;statbuf) != 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dbg(udev, "not a device: %s\n", syspath);</td><td> </td><td class="rblock">                        dbg(udev, "not a device: %s\n", syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } else {</td><td> </td><td class="rblock">        } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* everything else just needs to be a directory */</td><td> </td><td class="rblock">                /* everything else just needs to be a directory */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(path, &amp;statbuf) != 0 || !S_ISDIR(statbuf.st_mode)) </td><td> </td><td class="rblock">                if (stat(path, &amp;statbuf) != 0 || !S_ISDIR(statbuf.st_mode))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">{</td><td> </td><td class="rblock"> {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dbg(udev, "directory not found: %s\n", syspath);</td><td> </td><td class="rblock">                        dbg(udev, "directory not found: %s\n", syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0068" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device = udev_device_new(udev);</td><td> </td><td class="rblock">        udev_device = udev_device_new(udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0069" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_set_syspath(udev_device, path);</td><td> </td><td class="rblock">        udev_device_set_syspath(udev_device, path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       info(udev, "device %p has devpath '%s'\n", udev_device, <span class="delete">udev_device_</span></td><td> </td><td class="rblock">        info(udev, "device %p has devpath '%s'\n", udev_device, <span class="insert">udev_device</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">get_devpath(udev_device));</span></td><td> </td><td class="rblock"><span class="insert">_get_devpath(udev_device));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0070" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device;</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_new_from_devnum:</td><td> </td><td class="right"> * udev_device_new_from_devnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev: udev library context</td><td> </td><td class="right"> * @udev: udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @type: char or block device</td><td> </td><td class="right"> * @type: char or block device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @devnum: device major/minor number</td><td> </td><td class="right"> * @devnum: device major/minor number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Create new udev device, and fill in information from the sys</td><td> </td><td class="right"> * Create new udev device, and fill in information from the sys</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device and the udev database entry. The device is looked-up</td><td> </td><td class="right"> * device and the udev database entry. The device is looked-up</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * by its major/minor number and type. Character and block device</td><td> </td><td class="right"> * by its major/minor number and type. Character and block device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * numbers are not unique across the two types.</td><td> </td><td class="right"> * numbers are not unique across the two types.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The initial refcount is 1, and needs to be decremented to</td><td> </td><td class="right"> * The initial refcount is 1, and needs to be decremented to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * release the resources of the udev device.</td><td> </td><td class="right"> * release the resources of the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL, if it does not exist</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL, if it does not exist</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_new_from_devnum(struct udev *ud
ev, char type, dev_t devnum)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_new_from_devnum(struct udev *ud
ev, char type, dev_t devnum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0071" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *type_str;</td><td> </td><td class="rblock">        const char *type_str;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0072" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (type == 'b')</td><td> </td><td class="rblock">        if (type == 'b')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               type_str = "block";</td><td> </td><td class="rblock">                type_str = "block";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       else if (type == 'c')</td><td> </td><td class="rblock">        else if (type == 'c')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               type_str = "char";</td><td> </td><td class="rblock">                type_str = "char";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       else</td><td> </td><td class="rblock">        else</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0073" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* use /sys/dev/{block,char}/&lt;maj&gt;:&lt;min&gt; link */</td><td> </td><td class="rblock">        /* use /sys/dev/{block,char}/&lt;maj&gt;:&lt;min&gt; link */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       snprintf(path, sizeof(path), "%s/dev/%s/%u:%u",</td><td> </td><td class="rblock">        snprintf(path, sizeof(path), "%s/dev/%s/%u:%u",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                udev_get_sys_path(udev), type_str, major(devnum), <span class="delete">minor(dev</span></td><td> </td><td class="rblock">                 udev_get_sys_path(udev), type_str, major(devnum), <span class="insert">minor(de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">num));</span></td><td> </td><td class="rblock"><span class="insert">vnum));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device_new_from_syspath(udev, path);</td><td> </td><td class="rblock">        return udev_device_new_from_syspath(udev, path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_device *udev_device_new_from_id_filename(struct udev *udev, cha
r *id)</td><td> </td><td class="right">struct udev_device *udev_device_new_from_id_filename(struct udev *udev, cha
r *id)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0074" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char type;</td><td> </td><td class="rblock">        char type;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int maj, min;</td><td> </td><td class="rblock">        int maj, min;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char subsys[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char subsys[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *sysname;</td><td> </td><td class="rblock">        char *sysname;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0075" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       switch(id[0]) {</td><td> </td><td class="rblock">        switch(id[0]) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       case 'b':</td><td> </td><td class="rblock">        case 'b':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       case 'c':</td><td> </td><td class="rblock">        case 'c':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (sscanf(id, "%c%i:%i", &amp;type, &amp;maj, &amp;min) != 3)</td><td> </td><td class="rblock">                if (sscanf(id, "%c%i:%i", &amp;type, &amp;maj, &amp;min) != 3)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return udev_device_new_from_devnum(udev, type, makedev(maj, </td><td> </td><td class="rblock">                return udev_device_new_from_devnum(udev, type, makedev(maj,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">min));</td><td> </td><td class="rblock"> min));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       case 'n': {</td><td> </td><td class="rblock">        case 'n': {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               int sk;</td><td> </td><td class="rblock">                int sk;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct ifreq ifr;</td><td> </td><td class="rblock">                struct ifreq ifr;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_device *dev;</td><td> </td><td class="rblock">                struct udev_device *dev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               int ifindex;</td><td> </td><td class="rblock">                int ifindex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0076" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ifindex = strtoul(&amp;id[1], NULL, 10);</td><td> </td><td class="rblock">                ifindex = strtoul(&amp;id[1], NULL, 10);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ifindex &lt;= 0)</td><td> </td><td class="rblock">                if (ifindex &lt;= 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0077" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               sk = socket(PF_INET, SOCK_DGRAM, 0);</td><td> </td><td class="rblock">                sk = socket(PF_INET, SOCK_DGRAM, 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (sk &lt; 0)</td><td> </td><td class="rblock">                if (sk &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               memset(&amp;ifr, 0x00, sizeof(struct ifreq));</td><td> </td><td class="rblock">                memset(&amp;ifr, 0x00, sizeof(struct ifreq));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ifr.ifr_ifindex = ifindex;</td><td> </td><td class="rblock">                ifr.ifr_ifindex = ifindex;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (ioctl(sk, SIOCGIFNAME, &amp;ifr) != 0) {</td><td> </td><td class="rblock">                if (ioctl(sk, SIOCGIFNAME, &amp;ifr) != 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       close(sk);</td><td> </td><td class="rblock">                        close(sk);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               close(sk);</td><td> </td><td class="rblock">                close(sk);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0078" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dev = udev_device_new_from_subsystem_sysname(udev, "net", <span class="delete">if</span></td><td> </td><td class="rblock">                dev = udev_device_new_from_subsystem_sysname(udev, "net", <span class="insert">i</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r.ifr_name);</span></td><td> </td><td class="rblock"><span class="insert">fr.ifr_name);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (dev == NULL)</td><td> </td><td class="rblock">                if (dev == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device_get_ifindex(dev) == ifindex)</td><td> </td><td class="rblock">                if (udev_device_get_ifindex(dev) == ifindex)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return dev;</td><td> </td><td class="rblock">                        return dev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_unref(dev);</td><td> </td><td class="rblock">                udev_device_unref(dev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       case '+':</td><td> </td><td class="rblock">        case '+':</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpy(subsys, sizeof(subsys), &amp;id[1]);</td><td> </td><td class="rblock">                util_strscpy(subsys, sizeof(subsys), &amp;id[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               sysname = strchr(subsys, ':');</td><td> </td><td class="rblock">                sysname = strchr(subsys, ':');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (sysname == NULL)</td><td> </td><td class="rblock">                if (sysname == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               sysname[0] = '\0';</td><td> </td><td class="rblock">                sysname[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               sysname = &amp;sysname[1];</td><td> </td><td class="rblock">                sysname = &amp;sysname[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return udev_device_new_from_subsystem_sysname(udev, subsys, </td><td> </td><td class="rblock">                return udev_device_new_from_subsystem_sysname(udev, subsys,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">sysname);</td><td> </td><td class="rblock"> sysname);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       default:</td><td> </td><td class="rblock">        default:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_new_from_subsystem_sysname:</td><td> </td><td class="right"> * udev_device_new_from_subsystem_sysname:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev: udev library context</td><td> </td><td class="right"> * @udev: udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @subsystem: the subsystem of the device</td><td> </td><td class="right"> * @subsystem: the subsystem of the device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @sysname: the name of the device</td><td> </td><td class="right"> * @sysname: the name of the device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Create new udev device, and fill in information from the sys device</td><td> </td><td class="right"> * Create new udev device, and fill in information from the sys device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * and the udev database entry. The device is looked up by the subsystem</td><td> </td><td class="right"> * and the udev database entry. The device is looked up by the subsystem</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * and name string of the device, like "mem" / "zero", or "block" / "sda".</td><td> </td><td class="right"> * and name string of the device, like "mem" / "zero", or "block" / "sda".</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The initial refcount is 1, and needs to be decremented to</td><td> </td><td class="right"> * The initial refcount is 1, and needs to be decremented to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * release the resources of the udev device.</td><td> </td><td class="right"> * release the resources of the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL, if it does not exist</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL, if it does not exist</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_new_from_subsystem_sysname(stru
ct udev *udev, const char *subsystem, const char *sysname)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_new_from_subsystem_sysname(stru
ct udev *udev, const char *subsystem, const char *sysname)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0079" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char path_full[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char path_full[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *path;</td><td> </td><td class="rblock">        char *path;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size_t l;</td><td> </td><td class="rblock">        size_t l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct stat statbuf;</td><td> </td><td class="rblock">        struct stat statbuf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0080" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       path = path_full;</td><td> </td><td class="rblock">        path = path_full;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       l = util_strpcpyl(&amp;path, sizeof(path_full), <span class="delete">udev_get_sys_path(udev),</span></td><td> </td><td class="rblock">        l = util_strpcpyl(&amp;path, sizeof(path_full), <span class="insert">udev_get_sys_path(udev)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> NULL);</td><td> </td><td class="rblock"><span class="insert">,</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0081" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strcmp(subsystem, "subsystem") == 0) {</td><td> </td><td class="rblock">        if (strcmp(subsystem, "subsystem") == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, l, "/subsystem/", sysname, NULL);</td><td> </td><td class="rblock">                util_strscpyl(path, l, "/subsystem/", sysname, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       goto found;</td><td> </td><td class="rblock">                        goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0082" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, l, "/bus/", sysname, NULL);</td><td> </td><td class="rblock">                util_strscpyl(path, l, "/bus/", sysname, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       goto found;</td><td> </td><td class="rblock">                        goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0083" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, l, "/class/", sysname, NULL);</td><td> </td><td class="rblock">                util_strscpyl(path, l, "/class/", sysname, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       goto found;</td><td> </td><td class="rblock">                        goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0084" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strcmp(subsystem, "module") == 0) {</td><td> </td><td class="rblock">        if (strcmp(subsystem, "module") == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, l, "/module/", sysname, NULL);</td><td> </td><td class="rblock">                util_strscpyl(path, l, "/module/", sysname, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       goto found;</td><td> </td><td class="rblock">                        goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0085" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strcmp(subsystem, "drivers") == 0) {</td><td> </td><td class="rblock">        if (strcmp(subsystem, "drivers") == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char subsys[UTIL_NAME_SIZE];</td><td> </td><td class="rblock">                char subsys[UTIL_NAME_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *driver;</td><td> </td><td class="rblock">                char *driver;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0086" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpy(subsys, sizeof(subsys), sysname);</td><td> </td><td class="rblock">                util_strscpy(subsys, sizeof(subsys), sysname);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               driver = strchr(subsys, ':');</td><td> </td><td class="rblock">                driver = strchr(subsys, ':');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (driver != NULL) {</td><td> </td><td class="rblock">                if (driver != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       driver[0] = '\0';</td><td> </td><td class="rblock">                        driver[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       driver = &amp;driver[1];</td><td> </td><td class="rblock">                        driver = &amp;driver[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0087" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       util_strscpyl(path, l, "/subsystem/", subsys, <span class="delete">"/driv</span></td><td> </td><td class="rblock">                        util_strscpyl(path, l, "/subsystem/", subsys, <span class="insert">"/dri</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ers/",</span> driver, NULL);</td><td> </td><td class="rblock"><span class="insert">vers/",</span> driver, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                        if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               goto found;</td><td> </td><td class="rblock">                                goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0088" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       util_strscpyl(path, l, "/bus/", subsys, <span class="delete">"/drivers/",</span></td><td> </td><td class="rblock">                        util_strscpyl(path, l, "/bus/", subsys, <span class="insert">"/drivers/"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> driver, NULL);</td><td> </td><td class="rblock"><span class="insert">,</span> driver, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">                        if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               goto found;</td><td> </td><td class="rblock">                                goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0089" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(path, l, "/subsystem/", subsystem, "/devices/", <span class="delete">sysnam</span></td><td> </td><td class="rblock">        util_strscpyl(path, l, "/subsystem/", subsystem, "/devices/", <span class="insert">sysna</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e,</span> NULL);</td><td> </td><td class="rblock"><span class="insert">me,</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">        if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto found;</td><td> </td><td class="rblock">                goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0090" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(path, l, "/bus/", subsystem, "/devices/", sysname, <span class="delete">NUL</span></td><td> </td><td class="rblock">        util_strscpyl(path, l, "/bus/", subsystem, "/devices/", sysname, <span class="insert">NU</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">L);</span></td><td> </td><td class="rblock"><span class="insert">LL);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">        if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto found;</td><td> </td><td class="rblock">                goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0091" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(path, l, "/class/", subsystem, "/", sysname, NULL);</td><td> </td><td class="rblock">        util_strscpyl(path, l, "/class/", subsystem, "/", sysname, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (stat(path_full, &amp;statbuf) == 0)</td><td> </td><td class="rblock">        if (stat(path_full, &amp;statbuf) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto found;</td><td> </td><td class="rblock">                goto found;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">out:</td><td> </td><td class="right">out:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0092" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return NULL;</td><td> </td><td class="rblock">       <span class="insert"> </span>return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">found:</td><td> </td><td class="right">found:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0093" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device_new_from_syspath(udev, path_full);</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device_new_from_syspath(udev, path_full);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_new_from_environment</td><td> </td><td class="right"> * udev_device_new_from_environment</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev: udev library context</td><td> </td><td class="right"> * @udev: udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Create new udev device, and fill in information from the</td><td> </td><td class="right"> * Create new udev device, and fill in information from the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * current process environment. This only works reliable if</td><td> </td><td class="right"> * current process environment. This only works reliable if</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the process is called from a udev rule. It is usually used</td><td> </td><td class="right"> * the process is called from a udev rule. It is usually used</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * for tools executed from IMPORT= rules.</td><td> </td><td class="right"> * for tools executed from IMPORT= rules.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The initial refcount is 1, and needs to be decremented to</td><td> </td><td class="right"> * The initial refcount is 1, and needs to be decremented to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * release the resources of the udev device.</td><td> </td><td class="right"> * release the resources of the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL, if it does not exist</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL, if it does not exist</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_new_from_environment(struct ude
v *udev)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_new_from_environment(struct ude
v *udev)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0094" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int i;</td><td> </td><td class="rblock">        int i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *udev_device;</td><td> </td><td class="rblock">        struct udev_device *udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0095" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device = udev_device_new(udev);</td><td> </td><td class="rblock">        udev_device = udev_device_new(udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_set_info_loaded(udev_device);</td><td> </td><td class="rblock">        udev_device_set_info_loaded(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0096" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (i = 0; environ[i] != NULL; i++)</td><td> </td><td class="rblock">        for (i = 0; environ[i] != NULL; i++)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_add_property_from_string_parse(udev_device, <span class="delete">envi</span></td><td> </td><td class="rblock">                udev_device_add_property_from_string_parse(udev_device, <span class="insert">env</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ron[i]);</span></td><td> </td><td class="rblock"><span class="insert">iron[i]);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0097" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device_add_property_from_string_parse_finish(udev_device) &lt;</td><td> </td><td class="rblock">        if (udev_device_add_property_from_string_parse_finish(udev_device) </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> 0) {</td><td> </td><td class="rblock">&lt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               info(udev, "missing values, invalid device\n");</td><td> </td><td class="rblock">                info(udev, "missing values, invalid device\n");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_unref(udev_device);</td><td> </td><td class="rblock">                udev_device_unref(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device = NULL;</td><td> </td><td class="rblock">                udev_device = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0098" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device;</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static struct udev_device *device_new_from_parent(struct udev_device *udev_
device)</td><td> </td><td class="right">static struct udev_device *device_new_from_parent(struct udev_device *udev_
device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0099" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *udev_device_parent = NULL;</td><td> </td><td class="rblock">        struct udev_device *udev_device_parent = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *subdir;</td><td> </td><td class="rblock">        const char *subdir;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0100" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpy(path, sizeof(path), udev_device-&gt;syspath);</td><td> </td><td class="rblock">        util_strscpy(path, sizeof(path), udev_device-&gt;syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       subdir = &amp;path[strlen(udev_get_sys_path(udev_device-&gt;udev))+1];</td><td> </td><td class="rblock">        subdir = &amp;path[strlen(udev_get_sys_path(udev_device-&gt;udev))+1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (;;) {</td><td> </td><td class="rblock">        for (;;) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *pos;</td><td> </td><td class="rblock">                char *pos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0101" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pos = strrchr(subdir, '/');</td><td> </td><td class="rblock">                pos = strrchr(subdir, '/');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (pos == NULL || pos &lt; &amp;subdir[2])</td><td> </td><td class="rblock">                if (pos == NULL || pos &lt; &amp;subdir[2])</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               pos[0] = '\0';</td><td> </td><td class="rblock">                pos[0] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_parent = <span class="delete">udev_device_new_from_syspath(udev_devic</span></td><td> </td><td class="rblock">                udev_device_parent = <span class="insert">udev_device_new_from_syspath(udev_devi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e-&gt;udev,</span> path);</td><td> </td><td class="rblock"><span class="insert">ce-&gt;udev,</span> path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device_parent != NULL)</td><td> </td><td class="rblock">                if (udev_device_parent != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return udev_device_parent;</td><td> </td><td class="rblock">                        return udev_device_parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return NULL;</td><td> </td><td class="rblock">        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_parent:</td><td> </td><td class="right"> * udev_device_get_parent:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: the device to start searching from</td><td> </td><td class="right"> * @udev_device: the device to start searching from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Find the next parent device, and fill in information from the sys</td><td> </td><td class="right"> * Find the next parent device, and fill in information from the sys</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device and the udev database entry.</td><td> </td><td class="right"> * device and the udev database entry.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The returned the device is not referenced. It is attached to the</td><td> </td><td class="right"> * The returned the device is not referenced. It is attached to the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 976</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 939</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * It is not necessarily just the upper level directory, empty or not</td><td> </td><td class="right"> * It is not necessarily just the upper level directory, empty or not</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * recognized sys directories are ignored.</td><td> </td><td class="right"> * recognized sys directories are ignored.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * It can be called as many times as needed, without caring about</td><td> </td><td class="right"> * It can be called as many times as needed, without caring about</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * references.</td><td> </td><td class="right"> * references.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL, if it no parent exist.</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL, if it no parent exist.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_get_parent(struct udev_device *
udev_device)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_get_parent(struct udev_device *
udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0102" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;parent_set) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;parent_set) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;parent_set = true;</td><td> </td><td class="rblock">                udev_device-&gt;parent_set = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;parent_device = <span class="delete">device_new_from_parent(udev_dev</span></td><td> </td><td class="rblock">                udev_device-&gt;parent_device = <span class="insert">device_new_from_parent(udev_de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ice);</span></td><td> </td><td class="rblock"><span class="insert">vice);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;parent_device != NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;parent_device != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_device-&gt;udev, "returning existing parent %p\n", <span class="delete">ude</span></td><td> </td><td class="rblock">                dbg(udev_device-&gt;udev, "returning existing parent %p\n", <span class="insert">ud</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">v_device-&gt;parent_device);</span></td><td> </td><td class="rblock"><span class="insert">ev_device-&gt;parent_device);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;parent_device;</td><td> </td><td class="rblock">        return udev_device-&gt;parent_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_parent_with_subsystem_devtype:</td><td> </td><td class="right"> * udev_device_get_parent_with_subsystem_devtype:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device to start searching from</td><td> </td><td class="right"> * @udev_device: udev device to start searching from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @subsystem: the subsystem of the device</td><td> </td><td class="right"> * @subsystem: the subsystem of the device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @devtype: the type (DEVTYPE) of the device</td><td> </td><td class="right"> * @devtype: the type (DEVTYPE) of the device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Find the next parent device, with a matching subsystem and devtype</td><td> </td><td class="right"> * Find the next parent device, with a matching subsystem and devtype</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * value, and fill in information from the sys device and the udev</td><td> </td><td class="right"> * value, and fill in information from the sys device and the udev</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 1011</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 974</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * child device, and will be cleaned up when the child device</td><td> </td><td class="right"> * child device, and will be cleaned up when the child device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * is cleaned up.</td><td> </td><td class="right"> * is cleaned up.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * It can be called as many times as needed, without caring about</td><td> </td><td class="right"> * It can be called as many times as needed, without caring about</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * references.</td><td> </td><td class="right"> * references.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a new udev device, or #NULL if no matching parent exists.</td><td> </td><td class="right"> * Returns: a new udev device, or #NULL if no matching parent exists.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_get_parent_with_subsystem_devty
pe(struct udev_device *udev_device, const char *subsystem, const char *devt
ype)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_get_parent_with_subsystem_devty
pe(struct udev_device *udev_device, const char *subsystem, const char *devt
ype)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0103" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_device *parent;</td><td> </td><td class="rblock">       <span class="insert"> </span>struct udev_device *parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0104" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (subsystem == NULL)</td><td> </td><td class="rblock">        if (subsystem == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0105" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       parent = udev_device_get_parent(udev_device);</td><td> </td><td class="rblock">        parent = udev_device_get_parent(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       while (parent != NULL) {</td><td> </td><td class="rblock">        while (parent != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const char *parent_subsystem;</td><td> </td><td class="rblock">                const char *parent_subsystem;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const char *parent_devtype;</td><td> </td><td class="rblock">                const char *parent_devtype;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0106" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               parent_subsystem = udev_device_get_subsystem(parent);</td><td> </td><td class="rblock">                parent_subsystem = udev_device_get_subsystem(parent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (parent_subsystem != NULL &amp;&amp; strcmp(parent_subsystem, <span class="delete">sub</span></td><td> </td><td class="rblock">                if (parent_subsystem != NULL &amp;&amp; strcmp(parent_subsystem, <span class="insert">su</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">system)</span> == 0) {</td><td> </td><td class="rblock"><span class="insert">bsystem)</span> == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (devtype == NULL)</td><td> </td><td class="rblock">                        if (devtype == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               break;</td><td> </td><td class="rblock">                                break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       parent_devtype = udev_device_get_devtype(parent);</td><td> </td><td class="rblock">                        parent_devtype = udev_device_get_devtype(parent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (parent_devtype != NULL &amp;&amp; <span class="delete">strcmp(parent_devtype,</span></td><td> </td><td class="rblock">                        if (parent_devtype != NULL &amp;&amp; <span class="insert">strcmp(parent_devtype</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> devtype) == 0)</td><td> </td><td class="rblock"><span class="insert">,</span> devtype) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               break;</td><td> </td><td class="rblock">                                break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               parent = udev_device_get_parent(parent);</td><td> </td><td class="rblock">                parent = udev_device_get_parent(parent);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return parent;</td><td> </td><td class="rblock">        return parent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_udev:</td><td> </td><td class="right"> * udev_device_get_udev:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the udev library context the device was created with.</td><td> </td><td class="right"> * Retrieve the udev library context the device was created with.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the udev library context</td><td> </td><td class="right"> * Returns: the udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev *udev_device_get_udev(struct udev_device *udev_devi
ce)</td><td> </td><td class="right">UDEV_EXPORT struct udev *udev_device_get_udev(struct udev_device *udev_devi
ce)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0107" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;udev;</td><td> </td><td class="rblock">        return udev_device-&gt;udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_ref:</td><td> </td><td class="right"> * udev_device_ref:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Take a reference of a udev device.</td><td> </td><td class="right"> * Take a reference of a udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the passed udev device</td><td> </td><td class="right"> * Returns: the passed udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_device *udev_device_ref(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT struct udev_device *udev_device_ref(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0108" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;refcount++;</td><td> </td><td class="rblock">        udev_device-&gt;refcount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device;</td><td> </td><td class="rblock">        return udev_device;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_unref:</td><td> </td><td class="right"> * udev_device_unref:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Drop a reference of a udev device. If the refcount reaches zero,</td><td> </td><td class="right"> * Drop a reference of a udev device. If the refcount reaches zero,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the resources of the device will be released.</td><td> </td><td class="right"> * the resources of the device will be released.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT void udev_device_unref(struct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT void udev_device_unref(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0109" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return;</td><td> </td><td class="rblock">                return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;refcount--;</td><td> </td><td class="rblock">        udev_device-&gt;refcount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;refcount &gt; 0)</td><td> </td><td class="rblock">        if (udev_device-&gt;refcount &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return;</td><td> </td><td class="rblock">                return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;parent_device != NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;parent_device != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_unref(udev_device-&gt;parent_device);</td><td> </td><td class="rblock">                udev_device_unref(udev_device-&gt;parent_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;syspath);</td><td> </td><td class="rblock">        free(udev_device-&gt;syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;sysname);</td><td> </td><td class="rblock">        free(udev_device-&gt;sysname);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devnode);</td><td> </td><td class="rblock">        free(udev_device-&gt;devnode);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;subsystem);</td><td> </td><td class="rblock">        free(udev_device-&gt;subsystem);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devtype);</td><td> </td><td class="rblock">        free(udev_device-&gt;devtype);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;devlinks_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;devlinks_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;properties_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;properties_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;sysattr_value_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;sysattr_value_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;sysattr_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;sysattr_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;tags_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;tags_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;action);</td><td> </td><td class="rblock">        free(udev_device-&gt;action);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;driver);</td><td> </td><td class="rblock">        free(udev_device-&gt;driver);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devpath_old);</td><td> </td><td class="rblock">        free(udev_device-&gt;devpath_old);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">free(udev_device-&gt;knodename);</span></td><td> </td><td class="rblock">        free(udev_device-&gt;id_filename);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;id_filename);</td><td> </td><td class="rblock">        free(udev_device-&gt;envp);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;envp);</td><td> </td><td class="rblock">        free(udev_device-&gt;monitor_buf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;monitor_buf);</td><td> </td><td class="rblock">        dbg(udev_device-&gt;udev, "udev_device: %p released\n", udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_device-&gt;udev, "udev_device: %p released\n", udev_device);</td><td> </td><td class="rblock">        free(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device);</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_devpath:</td><td> </td><td class="right"> * udev_device_get_devpath:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the kernel devpath value of the udev device. The path</td><td> </td><td class="right"> * Retrieve the kernel devpath value of the udev device. The path</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * does not contain the sys mount point, and starts with a '/'.</td><td> </td><td class="right"> * does not contain the sys mount point, and starts with a '/'.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the devpath of the udev device</td><td> </td><td class="right"> * Returns: the devpath of the udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_devpath(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_devpath(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0110" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devpath;</td><td> </td><td class="rblock">        return udev_device-&gt;devpath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_syspath:</td><td> </td><td class="right"> * udev_device_get_syspath:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the sys path of the udev device. The path is an</td><td> </td><td class="right"> * Retrieve the sys path of the udev device. The path is an</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * absolute path and starts with the sys mount point.</td><td> </td><td class="right"> * absolute path and starts with the sys mount point.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the sys path of the udev device</td><td> </td><td class="right"> * Returns: the sys path of the udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_syspath(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_syspath(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0111" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;syspath;</td><td> </td><td class="rblock">        return udev_device-&gt;syspath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_sysname:</td><td> </td><td class="right"> * udev_device_get_sysname:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the sys name of the device device</td><td> </td><td class="right"> * Returns: the sys name of the device device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_sysname(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_sysname(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0112" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;sysname;</td><td> </td><td class="rblock">        return udev_device-&gt;sysname;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_sysnum:</td><td> </td><td class="right"> * udev_device_get_sysnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the trailing number of of the device name</td><td> </td><td class="right"> * Returns: the trailing number of of the device name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_sysnum(struct udev_device *udev_dev
ice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_sysnum(struct udev_device *udev_dev
ice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0113" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;sysnum;</td><td> </td><td class="rblock">        return udev_device-&gt;sysnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_devnode:</td><td> </td><td class="right"> * udev_device_get_devnode:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the device node file name belonging to the udev device.</td><td> </td><td class="right"> * Retrieve the device node file name belonging to the udev device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The path is an absolute path, and starts with the device directory.</td><td> </td><td class="right"> * The path is an absolute path, and starts with the device directory.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the device node file name of the udev device, or #NULL if no de
vice node exists</td><td> </td><td class="right"> * Returns: the device node file name of the udev device, or #NULL if no de
vice node exists</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_devnode(struct udev_device *udev_de
vice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_devnode(struct udev_device *udev_de
vice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0114" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if <span class="delete">(!udev_device-&gt;info_loaded) {</span></td><td> </td><td class="rblock">        if (udev_device-&gt;devnode != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               udev_device_read_uevent_file(udev_device);</span></td><td> </td><td class="rblock">                return udev_device-&gt;devnode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               udev_device_read_db(udev_device, NULL);</span></td><td> </td><td class="rblock">        <span class="insert">if (!udev_device-&gt;info_loaded)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       }</span></td><td> </td><td class="rblock"><span class="insert">                udev_device_read_uevent_file(udev_device);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock">        return udev_device-&gt;devnode;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       /* we might get called before we handled an event and have a db, use</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"> the kernel-provided name */</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">       if</span> (udev_device-&gt;devnode <span class="delete">== NULL &amp;&amp; udev_device_get_knodename(udev_d</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">evice)</span> != NULL) <span class="delete">{</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               char filename[UTIL_NAME_SIZE];</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               util_strscpyl(filename, sizeof(filename), udev_get_dev_path(</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">udev_device-&gt;udev), "/",</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                             udev_device_get_knodename(udev_device), NULL);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">               udev_device_set_devnode(udev_device, filename);</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return udev_device-&gt;devnode;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       <span class="delete">}</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                                           </td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devnode;</td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_devlinks_list_entry:</td><td> </td><td class="right"> * udev_device_get_devlinks_list_entry:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the list of device links pointing to the device file of</td><td> </td><td class="right"> * Retrieve the list of device links pointing to the device file of</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the udev device. The next list entry can be retrieved with</td><td> </td><td class="right"> * the udev device. The next list entry can be retrieved with</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_list_entry_next(), which returns #NULL if no more entries exist.</td><td> </td><td class="right"> * udev_list_entry_next(), which returns #NULL if no more entries exist.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The devlink path can be retrieved from the list entry by</td><td> </td><td class="right"> * The devlink path can be retrieved from the list entry by</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_list_entry_get_name(). The path is an absolute path, and starts wit
h</td><td> </td><td class="right"> * udev_list_entry_get_name(). The path is an absolute path, and starts wit
h</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the device directory.</td><td> </td><td class="right"> * the device directory.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the first entry of the device node link list</td><td> </td><td class="right"> * Returns: the first entry of the device node link list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_device_get_devlinks_list_entry(str
uct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_device_get_devlinks_list_entry(str
uct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0115" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_get_entry(&amp;udev_device-&gt;devlinks_list);</td><td> </td><td class="rblock">        return udev_list_get_entry(&amp;udev_device-&gt;devlinks_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_cleanup_devlinks_list(struct udev_device *udev_device)</td><td> </td><td class="right">void udev_device_cleanup_devlinks_list(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0116" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devlinks_uptodate = false;</td><td> </td><td class="rblock">        udev_device-&gt;devlinks_uptodate = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;devlinks_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;devlinks_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_properties_list_entry:</td><td> </td><td class="right"> * udev_device_get_properties_list_entry:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the list of key/value device properties of the udev</td><td> </td><td class="right"> * Retrieve the list of key/value device properties of the udev</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device. The next list entry can be retrieved with udev_list_entry_next()
,</td><td> </td><td class="right"> * device. The next list entry can be retrieved with udev_list_entry_next()
,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * which returns #NULL if no more entries exist. The property name</td><td> </td><td class="right"> * which returns #NULL if no more entries exist. The property name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * can be retrieved from the list entry by udev_list_get_name(),</td><td> </td><td class="right"> * can be retrieved from the list entry by udev_list_get_name(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the property value by udev_list_get_value().</td><td> </td><td class="right"> * the property value by udev_list_get_value().</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the first entry of the property list</td><td> </td><td class="right"> * Returns: the first entry of the property list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_device_get_properties_list_entry(s
truct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_device_get_properties_list_entry(s
truct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0117" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_uevent_file(udev_device);</td><td> </td><td class="rblock">                udev_device_read_uevent_file(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;devlinks_uptodate) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;devlinks_uptodate) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char symlinks[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char symlinks[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">                struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0118" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;devlinks_uptodate = true;</td><td> </td><td class="rblock">                udev_device-&gt;devlinks_uptodate = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               list_entry = <span class="delete">udev_device_get_devlinks_list_entry(udev_device</span></td><td> </td><td class="rblock">                list_entry = <span class="insert">udev_device_get_devlinks_list_entry(udev_devic</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">);</span></td><td> </td><td class="rblock"><span class="insert">e);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (list_entry != NULL) {</td><td> </td><td class="rblock">                if (list_entry != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       char *s;</td><td> </td><td class="rblock">                        char *s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       size_t l;</td><td> </td><td class="rblock">                        size_t l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0119" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       s = symlinks;</td><td> </td><td class="rblock">                        s = symlinks;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       l = util_strpcpyl(&amp;s, sizeof(symlinks), <span class="delete">udev_list_en</span></td><td> </td><td class="rblock">                        l = util_strpcpyl(&amp;s, sizeof(symlinks), <span class="insert">udev_list_e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">try_get_name(list_entry),</span> NULL);</td><td> </td><td class="rblock"><span class="insert">ntry_get_name(list_entry),</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_foreach(list_entry, <span class="delete">udev_list_entry_</span></td><td> </td><td class="rblock">                        udev_list_entry_foreach(list_entry, <span class="insert">udev_list_entry</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">get_next(list_entry))</span></td><td> </td><td class="rblock"><span class="insert">_get_next(list_entry))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               l = util_strpcpyl(&amp;s, l, " ", <span class="delete">udev_list_entr</span></td><td> </td><td class="rblock">                                l = util_strpcpyl(&amp;s, l, " ", <span class="insert">udev_list_ent</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">y_get_name(list_entry),</span> NULL);</td><td> </td><td class="rblock"><span class="insert">ry_get_name(list_entry),</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_property(udev_device, "DEVLINKS", <span class="delete">sy</span></td><td> </td><td class="rblock">                        udev_device_add_property(udev_device, "DEVLINKS", <span class="insert">s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">mlinks);</span></td><td> </td><td class="rblock"><span class="insert">ymlinks);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;tags_uptodate) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;tags_uptodate) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;tags_uptodate = true;</td><td> </td><td class="rblock">                udev_device-&gt;tags_uptodate = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device_get_tags_list_entry(udev_device) != NULL) {</td><td> </td><td class="rblock">                if (udev_device_get_tags_list_entry(udev_device) != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       char tags[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                        char tags[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">                        struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       char *s;</td><td> </td><td class="rblock">                        char *s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       size_t l;</td><td> </td><td class="rblock">                        size_t l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0120" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       s = tags;</td><td> </td><td class="rblock">                        s = tags;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       l = util_strpcpyl(&amp;s, sizeof(tags), ":", NULL);</td><td> </td><td class="rblock">                        l = util_strpcpyl(&amp;s, sizeof(tags), ":", NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_foreach(list_entry, <span class="delete">udev_device_get_</span></td><td> </td><td class="rblock">                        udev_list_entry_foreach(list_entry, <span class="insert">udev_device_get</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">tags_list_entry(udev_device))</span></td><td> </td><td class="rblock"><span class="insert">_tags_list_entry(udev_device))</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               l = util_strpcpyl(&amp;s, l, <span class="delete">udev_list_entry_get</span></td><td> </td><td class="rblock">                                l = util_strpcpyl(&amp;s, l, <span class="insert">udev_list_entry_ge</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">_name(list_entry),</span> ":", NULL);</td><td> </td><td class="rblock"><span class="insert">t_name(list_entry),</span> ":", NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_add_property(udev_device, "TAGS", <span class="delete">tags);</span></td><td> </td><td class="rblock">                        udev_device_add_property(udev_device, "TAGS", <span class="insert">tags)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_get_entry(&amp;udev_device-&gt;properties_list);</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return udev_list_get_entry(&amp;udev_device-&gt;properties_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_action:</td><td> </td><td class="right"> * udev_device_get_action:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This is only valid if the device was received through a monitor. Devices
 read from</td><td> </td><td class="right"> * This is only valid if the device was received through a monitor. Devices
 read from</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * sys do not have an action string. Usual actions are: add, remove, change
, online,</td><td> </td><td class="right"> * sys do not have an action string. Usual actions are: add, remove, change
, online,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * offline.</td><td> </td><td class="right"> * offline.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the kernel action value, or #NULL if there is no action value a
vailable.</td><td> </td><td class="right"> * Returns: the kernel action value, or #NULL if there is no action value a
vailable.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_action(struct udev_device *udev_dev
ice)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_action(struct udev_device *udev_dev
ice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0121" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;action;</td><td> </td><td class="rblock">        return udev_device-&gt;action;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_usec_since_initialized:</td><td> </td><td class="right"> * udev_device_get_usec_since_initialized:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Return the number of microseconds passed since udev set up the</td><td> </td><td class="right"> * Return the number of microseconds passed since udev set up the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device for the first time.</td><td> </td><td class="right"> * device for the first time.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This is only implemented for devices with need to store properties</td><td> </td><td class="right"> * This is only implemented for devices with need to store properties</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * in the udev database. All other devices return 0 here.</td><td> </td><td class="right"> * in the udev database. All other devices return 0 here.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the number of microseconds since the device was first seen.</td><td> </td><td class="right"> * Returns: the number of microseconds since the device was first seen.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT unsigned long long int udev_device_get_usec_since_initialized(s
truct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT unsigned long long int udev_device_get_usec_since_initialized(s
truct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0122" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long now;</td><td> </td><td class="rblock">       <span class="insert"> </span>unsigned long long now;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0123" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;usec_initialized == 0)</td><td> </td><td class="rblock">        if (udev_device-&gt;usec_initialized == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       now = now_usec();</td><td> </td><td class="rblock">        now = now_usec();</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (now == 0)</td><td> </td><td class="rblock">        if (now == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return now - udev_device-&gt;usec_initialized;</td><td> </td><td class="rblock">        return now - udev_device-&gt;usec_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">unsigned long long udev_device_get_usec_initialized(struct udev_device *ude
v_device)</td><td> </td><td class="right">unsigned long long udev_device_get_usec_initialized(struct udev_device *ude
v_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0124" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;usec_initialized;</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device-&gt;usec_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_set_usec_initialized(struct udev_device *udev_device, unsi
gned long long usec_initialized)</td><td> </td><td class="right">void udev_device_set_usec_initialized(struct udev_device *udev_device, unsi
gned long long usec_initialized)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0125" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char num[32];</td><td> </td><td class="rblock">       <span class="insert"> </span>char num[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0126" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;usec_initialized = usec_initialized;</td><td> </td><td class="rblock">        udev_device-&gt;usec_initialized = usec_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       snprintf(num, sizeof(num), "%llu", usec_initialized);</td><td> </td><td class="rblock">        snprintf(num, sizeof(num), "%llu", usec_initialized);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "USEC_INITIALIZED", num);</td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "USEC_INITIALIZED", num);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_sysattr_value:</td><td> </td><td class="right"> * udev_device_get_sysattr_value:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @sysattr: attribute name</td><td> </td><td class="right"> * @sysattr: attribute name</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The retrieved value is cached in the device. Repeated calls will return 
the same</td><td> </td><td class="right"> * The retrieved value is cached in the device. Repeated calls will return 
the same</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * value and not open the attribute again.</td><td> </td><td class="right"> * value and not open the attribute again.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the content of a sys attribute file, or #NULL if there is no sy
s attribute value.</td><td> </td><td class="right"> * Returns: the content of a sys attribute file, or #NULL if there is no sy
s attribute value.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT const char *udev_device_get_sysattr_value(struct udev_device *u
dev_device, const char *sysattr)</td><td> </td><td class="right">UDEV_EXPORT const char *udev_device_get_sysattr_value(struct udev_device *u
dev_device, const char *sysattr)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0127" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">        struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char value[4096];</td><td> </td><td class="rblock">        char value[4096];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct stat statbuf;</td><td> </td><td class="rblock">        struct stat statbuf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int fd;</td><td> </td><td class="rblock">        int fd;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       ssize_t size;</td><td> </td><td class="rblock">        ssize_t size;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *val = NULL;</td><td> </td><td class="rblock">        const char *val = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0128" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (sysattr == NULL)</td><td> </td><td class="rblock">        if (sysattr == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0129" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* look for possibly already cached result */</td><td> </td><td class="rblock">        /* look for possibly already cached result */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_list_get_entry(&amp;udev_device-&gt;sysattr_value_list);</td><td> </td><td class="rblock">        list_entry = udev_list_get_entry(&amp;udev_device-&gt;sysattr_value_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_list_entry_get_by_name(list_entry, sysattr);</td><td> </td><td class="rblock">        list_entry = udev_list_entry_get_by_name(list_entry, sysattr);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (list_entry != NULL) {</td><td> </td><td class="rblock">        if (list_entry != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_device-&gt;udev, "got '%s' (%s) from cache\n",</td><td> </td><td class="rblock">                dbg(udev_device-&gt;udev, "got '%s' (%s) from cache\n",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   sysattr, udev_list_entry_get_value(list_entry));</td><td> </td><td class="rblock">                    sysattr, udev_list_entry_get_value(list_entry));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return udev_list_entry_get_value(list_entry);</td><td> </td><td class="rblock">                return udev_list_entry_get_value(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0130" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(path, sizeof(path), <span class="delete">udev_device_get_syspath(udev_devic</span></td><td> </td><td class="rblock">        util_strscpyl(path, sizeof(path), <span class="insert">udev_device_get_syspath(udev_devi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e),</span> "/", sysattr, NULL);</td><td> </td><td class="rblock"><span class="insert">ce),</span> "/", sysattr, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (lstat(path, &amp;statbuf) != 0) {</td><td> </td><td class="rblock">        if (lstat(path, &amp;statbuf) != 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_device-&gt;udev, "no attribute '%s', keep negative <span class="delete">ent</span></td><td> </td><td class="rblock">                dbg(udev_device-&gt;udev, "no attribute '%s', keep negative <span class="insert">en</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ry\n",</span> path);</td><td> </td><td class="rblock"><span class="insert">try\n",</span> path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_list_entry_add(&amp;udev_device-&gt;sysattr_value_list, <span class="delete">sysatt</span></td><td> </td><td class="rblock">                udev_list_entry_add(&amp;udev_device-&gt;sysattr_value_list, <span class="insert">sysat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">r,</span> NULL);</td><td> </td><td class="rblock"><span class="insert">tr,</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0131" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (S_ISLNK(statbuf.st_mode)) {</td><td> </td><td class="rblock">        if (S_ISLNK(statbuf.st_mode)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_device *dev;</td><td> </td><td class="rblock">                struct udev_device *dev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0132" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /*</td><td> </td><td class="rblock">                /*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                * Some core links return only the last element of the <span class="delete">targe</span></td><td> </td><td class="rblock">                 * Some core links return only the last element of the <span class="insert">targ</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">t</span> path,</td><td> </td><td class="rblock"><span class="insert">et</span> path,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                * these are just values, the paths should not be exposed.</td><td> </td><td class="rblock">                 * these are just values, the paths should not be exposed.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                */</td><td> </td><td class="rblock">                 */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (strcmp(sysattr, "driver") == 0 ||</td><td> </td><td class="rblock">                if (strcmp(sysattr, "driver") == 0 ||</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   strcmp(sysattr, "subsystem") == 0 ||</td><td> </td><td class="rblock">                    strcmp(sysattr, "subsystem") == 0 ||</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   strcmp(sysattr, "module") == 0) {</td><td> </td><td class="rblock">                    strcmp(sysattr, "module") == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (util_get_sys_core_link_value(udev_device-&gt;udev, </td><td> </td><td class="rblock">                        if (util_get_sys_core_link_value(udev_device-&gt;udev,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">sysattr,</td><td> </td><td class="rblock"> sysattr,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        <span class="delete">udev_device-&gt;syspat</span></td><td> </td><td class="rblock">                                                         <span class="insert">udev_device-&gt;syspa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">h,</span> value, sizeof(value)) &lt; 0)</td><td> </td><td class="rblock"><span class="insert">th,</span> value, sizeof(value)) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               return NULL;</td><td> </td><td class="rblock">                                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       dbg(udev_device-&gt;udev, "cache '%s' with link value <span class="delete">'</span></td><td> </td><td class="rblock">                        dbg(udev_device-&gt;udev, "cache '%s' with link value </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">%s'\n",</span> sysattr, value);</td><td> </td><td class="rblock"><span class="insert">'%s'\n",</span> sysattr, value);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       list_entry = <span class="delete">udev_list_entry_add(&amp;udev_device-&gt;sysat</span></td><td> </td><td class="rblock">                        list_entry = <span class="insert">udev_list_entry_add(&amp;udev_device-&gt;sysa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">tr_value_list,</span> sysattr, value);</td><td> </td><td class="rblock"><span class="insert">ttr_value_list,</span> sysattr, value);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       val = udev_list_entry_get_value(list_entry);</td><td> </td><td class="rblock">                        val = udev_list_entry_get_value(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       goto out;</td><td> </td><td class="rblock">                        goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0133" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* resolve link to a device and return its syspath */</td><td> </td><td class="rblock">                /* resolve link to a device and return its syspath */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, sizeof(path), udev_device-&gt;syspath, <span class="delete">"/",</span></td><td> </td><td class="rblock">                util_strscpyl(path, sizeof(path), udev_device-&gt;syspath, <span class="insert">"/"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> sysattr, NULL);</td><td> </td><td class="rblock"><span class="insert">,</span> sysattr, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dev = udev_device_new_from_syspath(udev_device-&gt;udev, <span class="delete">path);</span></td><td> </td><td class="rblock">                dev = udev_device_new_from_syspath(udev_device-&gt;udev, <span class="insert">path)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (dev != NULL) {</td><td> </td><td class="rblock"><span class="insert">;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       list_entry = <span class="delete">udev_list_entry_add(&amp;udev_device-&gt;sysat</span></td><td> </td><td class="rblock">                if (dev != NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">tr_value_list,</span> sysattr,</td><td> </td><td class="rblock">                        list_entry = <span class="insert">udev_list_entry_add(&amp;udev_device-&gt;sysa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                                        <span class="delete">udev_device_get_sys</span></td><td> </td><td class="rblock"><span class="insert">ttr_value_list,</span> sysattr,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">path(dev));</span></td><td> </td><td class="rblock">                                                         <span class="insert">udev_device_get_sy</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       val = udev_list_entry_get_value(list_entry);</td><td> </td><td class="rblock"><span class="insert">spath(dev));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device_unref(dev);</td><td> </td><td class="rblock">                        val = udev_list_entry_get_value(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                        udev_device_unref(dev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0134" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0135" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* skip directories */</td><td> </td><td class="rblock">        /* skip directories */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (S_ISDIR(statbuf.st_mode))</td><td> </td><td class="rblock">        if (S_ISDIR(statbuf.st_mode))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0136" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* skip non-readable files */</td><td> </td><td class="rblock">        /* skip non-readable files */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if ((statbuf.st_mode &amp; S_IRUSR) == 0)</td><td> </td><td class="rblock">        if ((statbuf.st_mode &amp; S_IRUSR) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0137" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* read attribute value */</td><td> </td><td class="rblock">        /* read attribute value */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fd = open(path, O_RDONLY|O_CLOEXEC);</td><td> </td><td class="rblock">        fd = open(path, O_RDONLY|O_CLOEXEC);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fd &lt; 0) {</td><td> </td><td class="rblock">        if (fd &lt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_device-&gt;udev, "attribute '%s' can not be <span class="delete">opened\n",</span></td><td> </td><td class="rblock">                dbg(udev_device-&gt;udev, "attribute '%s' can not be <span class="insert">opened\n"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"> path);</td><td> </td><td class="rblock"><span class="insert">,</span> path);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size = read(fd, value, sizeof(value));</td><td> </td><td class="rblock">        size = read(fd, value, sizeof(value));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       close(fd);</td><td> </td><td class="rblock">        close(fd);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (size &lt; 0)</td><td> </td><td class="rblock">        if (size &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (size == sizeof(value))</td><td> </td><td class="rblock">        if (size == sizeof(value))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0138" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* got a valid value, store it in cache and return it */</td><td> </td><td class="rblock">        /* got a valid value, store it in cache and return it */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       value[size] = '\0';</td><td> </td><td class="rblock">        value[size] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_remove_trailing_chars(value, '\n');</td><td> </td><td class="rblock">        util_remove_trailing_chars(value, '\n');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_device-&gt;udev, "'%s' has attribute value '%s'\n", path, <span class="delete">valu</span></td><td> </td><td class="rblock">        dbg(udev_device-&gt;udev, "'%s' has attribute value '%s'\n", path, <span class="insert">val</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">ue);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_list_entry_add(&amp;udev_device-&gt;sysattr_value_list, <span class="delete">s</span></td><td> </td><td class="rblock">        list_entry = udev_list_entry_add(&amp;udev_device-&gt;sysattr_value_list, </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ysattr,</span> value);</td><td> </td><td class="rblock"><span class="insert">sysattr,</span> value);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       val = udev_list_entry_get_value(list_entry);</td><td> </td><td class="rblock">        val = udev_list_entry_get_value(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">out:</td><td> </td><td class="right">out:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0139" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return val;</td><td> </td><td class="rblock">       <span class="insert"> </span>return val;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int udev_device_sysattr_list_read(struct udev_device *udev_device)</td><td> </td><td class="right">static int udev_device_sysattr_list_read(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0140" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct dirent *dent;</td><td> </td><td class="rblock">        struct dirent *dent;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       DIR *dir;</td><td> </td><td class="rblock">        DIR *dir;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int num = 0;</td><td> </td><td class="rblock">        int num = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0141" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;sysattr_list_read)</td><td> </td><td class="rblock">        if (udev_device-&gt;sysattr_list_read)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0142" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dir = opendir(udev_device_get_syspath(udev_device));</td><td> </td><td class="rblock">        dir = opendir(udev_device_get_syspath(udev_device));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!dir) {</td><td> </td><td class="rblock">        if (!dir) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_device-&gt;udev, "sysfs dir '%s' can not be <span class="delete">opened\n",</span></td><td> </td><td class="rblock">                dbg(udev_device-&gt;udev, "sysfs dir '%s' can not be <span class="insert">opened\n"</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               udev_device_get_syspath(udev_device));</td><td> </td><td class="rblock"><span class="insert">,</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                                udev_device_get_syspath(udev_device));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0143" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (dent = readdir(dir); dent != NULL; dent = readdir(dir)) {</td><td> </td><td class="rblock">        for (dent = readdir(dir); dent != NULL; dent = readdir(dir)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char path[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char path[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct stat statbuf;</td><td> </td><td class="rblock">                struct stat statbuf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0144" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* only handle symlinks and regular files */</td><td> </td><td class="rblock">                /* only handle symlinks and regular files */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (dent-&gt;d_type != DT_LNK &amp;&amp; dent-&gt;d_type != DT_REG)</td><td> </td><td class="rblock">                if (dent-&gt;d_type != DT_LNK &amp;&amp; dent-&gt;d_type != DT_REG)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       continue;</td><td> </td><td class="rblock">                        continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0145" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               util_strscpyl(path, sizeof(path), <span class="delete">udev_device_get_syspath(ud</span></td><td> </td><td class="rblock">                util_strscpyl(path, sizeof(path), <span class="insert">udev_device_get_syspath(u</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ev_device),</span> "/", dent-&gt;d_name, NULL);</td><td> </td><td class="rblock"><span class="insert">dev_device),</span> "/", dent-&gt;d_name, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (lstat(path, &amp;statbuf) != 0)</td><td> </td><td class="rblock">                if (lstat(path, &amp;statbuf) != 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       continue;</td><td> </td><td class="rblock">                        continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if ((statbuf.st_mode &amp; S_IRUSR) == 0)</td><td> </td><td class="rblock">                if ((statbuf.st_mode &amp; S_IRUSR) == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       continue;</td><td> </td><td class="rblock">                        continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0146" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_list_entry_add(&amp;udev_device-&gt;sysattr_list, <span class="delete">dent-&gt;d_name</span></td><td> </td><td class="rblock">                udev_list_entry_add(&amp;udev_device-&gt;sysattr_list, <span class="insert">dent-&gt;d_nam</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> NULL);</td><td> </td><td class="rblock"><span class="insert">e,</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               num++;</td><td> </td><td class="rblock">                num++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0147" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       closedir(dir);</td><td> </td><td class="rblock">        closedir(dir);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_device-&gt;udev, "found %d sysattrs for '%s'\n", num, <span class="delete">udev_dev</span></td><td> </td><td class="rblock">        dbg(udev_device-&gt;udev, "found %d sysattrs for '%s'\n", num, <span class="insert">udev_de</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ice_get_syspath(udev_device));</span></td><td> </td><td class="rblock"><span class="insert">vice_get_syspath(udev_device));</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;sysattr_list_read = true;</td><td> </td><td class="rblock">        udev_device-&gt;sysattr_list_read = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0148" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return num;</td><td> </td><td class="rblock">       <span class="insert"> </span>return num;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_sysattr_list_entry:</td><td> </td><td class="right"> * udev_device_get_sysattr_list_entry:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the list of available sysattrs, with value being empty;</td><td> </td><td class="right"> * Retrieve the list of available sysattrs, with value being empty;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This just return all available sysfs attributes for a particular</td><td> </td><td class="right"> * This just return all available sysfs attributes for a particular</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device without reading their values.</td><td> </td><td class="right"> * device without reading their values.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the first entry of the property list</td><td> </td><td class="right"> * Returns: the first entry of the property list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_device_get_sysattr_list_entry(stru
ct udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_device_get_sysattr_list_entry(stru
ct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0149" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;sysattr_list_read) {</td><td> </td><td class="rblock">        if (!udev_device-&gt;sysattr_list_read) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               int ret;</td><td> </td><td class="rblock">                int ret;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ret = udev_device_sysattr_list_read(udev_device);</td><td> </td><td class="rblock">                ret = udev_device_sysattr_list_read(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (0 &gt; ret)</td><td> </td><td class="rblock">                if (0 &gt; ret)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0150" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_get_entry(&amp;udev_device-&gt;sysattr_list);</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_list_get_entry(&amp;udev_device-&gt;sysattr_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_set_syspath(struct udev_device *udev_device, const char *sy
spath)</td><td> </td><td class="right">int udev_device_set_syspath(struct udev_device *udev_device, const char *sy
spath)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0151" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       const char *pos;</td><td> </td><td class="rblock">        const char *pos;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size_t len;</td><td> </td><td class="rblock">        size_t len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0152" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;syspath);</td><td> </td><td class="rblock">        free(udev_device-&gt;syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;syspath = strdup(syspath);</td><td> </td><td class="rblock">        udev_device-&gt;syspath = strdup(syspath);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;syspath ==  NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;syspath ==  NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devpath = <span class="delete">&amp;udev_device-&gt;syspath[strlen(udev_get_sys_pat</span></td><td> </td><td class="rblock">        udev_device-&gt;devpath = <span class="insert">&amp;udev_device-&gt;syspath[strlen(udev_get_sys_pa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">h(udev_device-&gt;udev))];</span></td><td> </td><td class="rblock"><span class="insert">th(udev_device-&gt;udev))];</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DEVPATH", <span class="delete">udev_device-&gt;devpat</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DEVPATH", <span class="insert">udev_device-&gt;devpa</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">h);</span></td><td> </td><td class="rblock"><span class="insert">th);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0153" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       pos = strrchr(udev_device-&gt;syspath, '/');</td><td> </td><td class="rblock">        pos = strrchr(udev_device-&gt;syspath, '/');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (pos == NULL)</td><td> </td><td class="rblock">        if (pos == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;sysname = strdup(&amp;pos[1]);</td><td> </td><td class="rblock">        udev_device-&gt;sysname = strdup(&amp;pos[1]);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;sysname == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;sysname == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0154" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* some devices have '!' in their name, change that to '/' */</td><td> </td><td class="rblock">        /* some devices have '!' in their name, change that to '/' */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       len = 0;</td><td> </td><td class="rblock">        len = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       while (udev_device-&gt;sysname[len] != '\0') {</td><td> </td><td class="rblock">        while (udev_device-&gt;sysname[len] != '\0') {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device-&gt;sysname[len] == '!')</td><td> </td><td class="rblock">                if (udev_device-&gt;sysname[len] == '!')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_device-&gt;sysname[len] = '/';</td><td> </td><td class="rblock">                        udev_device-&gt;sysname[len] = '/';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               len++;</td><td> </td><td class="rblock">                len++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0155" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* trailing number */</td><td> </td><td class="rblock">        /* trailing number */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       while (len &gt; 0 &amp;&amp; isdigit(udev_device-&gt;sysname[--len]))</td><td> </td><td class="rblock">        while (len &gt; 0 &amp;&amp; isdigit(udev_device-&gt;sysname[--len]))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;sysnum = &amp;udev_device-&gt;sysname[len];</td><td> </td><td class="rblock">                udev_device-&gt;sysnum = &amp;udev_device-&gt;sysname[len];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0156" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* sysname is completely numeric */</td><td> </td><td class="rblock">        /* sysname is completely numeric */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (len == 0)</td><td> </td><td class="rblock">        if (len == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;sysnum = NULL;</td><td> </td><td class="rblock">                udev_device-&gt;sysnum = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0157" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">       <span class="insert"> </span>return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_set_devnode(struct udev_device *udev_device, const char *de
vnode)</td><td> </td><td class="right">int udev_device_set_devnode(struct udev_device *udev_device, const char *de
vnode)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0158" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;devnode);</td><td> </td><td class="rblock">        free(udev_device-&gt;devnode);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devnode = strdup(devnode);</td><td> </td><td class="rblock">        <span class="insert">if (devnode[0] != '/') {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;devnode == NULL)</td><td> </td><td class="rblock"><span class="insert">                if (asprintf(&amp;udev_device-&gt;devnode, "%s/%s", udev_get_dev_p</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock"><span class="insert">ath(udev_device-&gt;udev), devnode) &lt; 0)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "DEVNAME", <span class="delete">udev_device-&gt;devnod</span></td><td> </td><td class="rblock"><span class="insert">                        udev_device-&gt;devnode = NULL;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e);</span></td><td> </td><td class="rblock"><span class="insert">        } else {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">                udev_device-&gt;devnode = strdup(devnode);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        <span class="insert">}</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        if (udev_device-&gt;devnode == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "DEVNAME", <span class="insert">udev_device-&gt;devno</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">de);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_add_devlink(struct udev_device *udev_device, const char *de
vlink, int unique)</td><td> </td><td class="right">int udev_device_add_devlink(struct udev_device *udev_device, const char *de
vlink, int unique)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0159" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">       <span class="insert"> </span>struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0160" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;devlinks_uptodate = false;</td><td> </td><td class="rblock">        udev_device-&gt;devlinks_uptodate = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_list_entry_add(&amp;udev_device-&gt;devlinks_list, <span class="delete">devlin</span></td><td> </td><td class="rblock">        list_entry = udev_list_entry_add(&amp;udev_device-&gt;devlinks_list, <span class="insert">devli</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">k,</span> NULL);</td><td> </td><td class="rblock"><span class="insert">nk,</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (list_entry == NULL)</td><td> </td><td class="rblock">        if (list_entry == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (unique)</td><td> </td><td class="rblock">        if (unique)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_list_entry_set_num(list_entry, true);</td><td> </td><td class="rblock">                udev_list_entry_set_num(list_entry, true);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">const char *udev_device_get_id_filename(struct udev_device *udev_device)</td><td> </td><td class="right">const char *udev_device_get_id_filename(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0161" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;id_filename == NULL) {</td><td> </td><td class="rblock">        if (udev_device-&gt;id_filename == NULL) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_device_get_subsystem(udev_device) == NULL)</td><td> </td><td class="rblock">                if (udev_device_get_subsystem(udev_device) == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0162" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (major(udev_device_get_devnum(udev_device)) &gt; 0) {</td><td> </td><td class="rblock">                if (major(udev_device_get_devnum(udev_device)) &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       /* use dev_t -- b259:131072, c254:0 */</td><td> </td><td class="rblock">                        /* use dev_t -- b259:131072, c254:0 */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (asprintf(&amp;udev_device-&gt;id_filename, "%c%u:%u",</td><td> </td><td class="rblock">                        if (asprintf(&amp;udev_device-&gt;id_filename, "%c%u:%u",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                    <span class="delete">strcmp(udev_device_get_subsystem(udev_d</span></td><td> </td><td class="rblock">                                     <span class="insert">strcmp(udev_device_get_subsystem(udev_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">evice),</span> "block") == 0 ? 'b' : 'c',</td><td> </td><td class="rblock"><span class="insert">device),</span> "block") == 0 ? 'b' : 'c',</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                    <span class="delete">major(udev_device_get_devnum(udev_devic</span></td><td> </td><td class="rblock">                                     <span class="insert">major(udev_device_get_devnum(udev_devi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e)),</span></td><td> </td><td class="rblock"><span class="insert">ce)),</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">                                    minor(udev_device_get_devnum(udev_devic</span></td><td> </td><td class="rblock"><span class="insert">                                     minor(udev_device_get_devnum(udev_devi</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e)))</span> &lt; 0)</td><td> </td><td class="rblock"><span class="insert">ce)))</span> &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               udev_device-&gt;id_filename = NULL;</td><td> </td><td class="rblock">                                udev_device-&gt;id_filename = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else if (udev_device_get_ifindex(udev_device) &gt; 0) {</td><td> </td><td class="rblock">                } else if (udev_device_get_ifindex(udev_device) &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       /* use netdev ifindex -- n3 */</td><td> </td><td class="rblock">                        /* use netdev ifindex -- n3 */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (asprintf(&amp;udev_device-&gt;id_filename, "n%u", <span class="delete">udev_</span></td><td> </td><td class="rblock">                        if (asprintf(&amp;udev_device-&gt;id_filename, "n%u", <span class="insert">udev</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">device_get_ifindex(udev_device))</span> &lt; 0)</td><td> </td><td class="rblock"><span class="insert">_device_get_ifindex(udev_device))</span> &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               udev_device-&gt;id_filename = NULL;</td><td> </td><td class="rblock">                                udev_device-&gt;id_filename = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">                } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       /*</td><td> </td><td class="rblock">                        /*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        * use $subsys:$syname -- pci:0000:00:1f.2</td><td> </td><td class="rblock">                         * use $subsys:$syname -- pci:0000:00:1f.2</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        * sysname() has '!' translated, get it from <span class="delete">devpath</span></td><td> </td><td class="rblock">                         * sysname() has '!' translated, get it from <span class="insert">devpat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                        */</td><td> </td><td class="rblock"><span class="insert">h</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       const char *sysname;</td><td> </td><td class="rblock">                         */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       sysname = strrchr(udev_device-&gt;devpath, '/');</td><td> </td><td class="rblock">                        const char *sysname;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (sysname == NULL)</td><td> </td><td class="rblock">                        sysname = strrchr(udev_device-&gt;devpath, '/');</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               return NULL;</td><td> </td><td class="rblock">                        if (sysname == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       sysname = &amp;sysname[1];</td><td> </td><td class="rblock">                                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (asprintf(&amp;udev_device-&gt;id_filename, "+%s:%s", <span class="delete">ud</span></td><td> </td><td class="rblock">                        sysname = &amp;sysname[1];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ev_device_get_subsystem(udev_device),</span> sysname) &lt; 0)</td><td> </td><td class="rblock">                        if (asprintf(&amp;udev_device-&gt;id_filename, "+%s:%s", <span class="insert">u</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               udev_device-&gt;id_filename = NULL;</td><td> </td><td class="rblock"><span class="insert">dev_device_get_subsystem(udev_device),</span> sysname) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                                udev_device-&gt;id_filename = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;id_filename;</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return udev_device-&gt;id_filename;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_is_initialized:</td><td> </td><td class="right"> * udev_device_get_is_initialized:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Check if udev has already handled the device and has set up</td><td> </td><td class="right"> * Check if udev has already handled the device and has set up</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device node permissions and context, or has renamed a network</td><td> </td><td class="right"> * device node permissions and context, or has renamed a network</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * device.</td><td> </td><td class="right"> * device.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * This is only implemented for devices with a device node</td><td> </td><td class="right"> * This is only implemented for devices with a device node</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * or network interfaces. All other devices return 1 here.</td><td> </td><td class="right"> * or network interfaces. All other devices return 1 here.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: 1 if the device is set up. 0 otherwise.</td><td> </td><td class="right"> * Returns: 1 if the device is set up. 0 otherwise.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_device_get_is_initialized(struct udev_device *udev_dev
ice)</td><td> </td><td class="right">UDEV_EXPORT int udev_device_get_is_initialized(struct udev_device *udev_dev
ice)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0163" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;is_initialized;</td><td> </td><td class="rblock">        return udev_device-&gt;is_initialized;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_set_is_initialized(struct udev_device *udev_device)</td><td> </td><td class="right">void udev_device_set_is_initialized(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0164" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;is_initialized = true;</td><td> </td><td class="rblock">       <span class="insert"> </span>udev_device-&gt;is_initialized = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_add_tag(struct udev_device *udev_device, const char *tag)</td><td> </td><td class="right">int udev_device_add_tag(struct udev_device *udev_device, const char *tag)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0165" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (strchr(tag, ':') != NULL || strchr(tag, ' ') != NULL)</td><td> </td><td class="rblock">        if (strchr(tag, ':') != NULL || strchr(tag, ' ') != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;tags_uptodate = false;</td><td> </td><td class="rblock">        udev_device-&gt;tags_uptodate = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_list_entry_add(&amp;udev_device-&gt;tags_list, tag, NULL) != <span class="delete">NULL)</span></td><td> </td><td class="rblock">        if (udev_list_entry_add(&amp;udev_device-&gt;tags_list, tag, NULL) != <span class="insert">NULL</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock"><span class="insert">)</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return -ENOMEM;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">        return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_cleanup_tags_list(struct udev_device *udev_device)</td><td> </td><td class="right">void udev_device_cleanup_tags_list(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0166" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;tags_uptodate = false;</td><td> </td><td class="rblock">        udev_device-&gt;tags_uptodate = false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_device-&gt;tags_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_device-&gt;tags_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_device_get_tags_list_entry:</td><td> </td><td class="right"> * udev_device_get_tags_list_entry:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_device: udev device</td><td> </td><td class="right"> * @udev_device: udev device</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the list of tags attached to the udev device. The next</td><td> </td><td class="right"> * Retrieve the list of tags attached to the udev device. The next</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * list entry can be retrieved with udev_list_entry_next(),</td><td> </td><td class="right"> * list entry can be retrieved with udev_list_entry_next(),</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * which returns #NULL if no more entries exist. The tag string</td><td> </td><td class="right"> * which returns #NULL if no more entries exist. The tag string</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * can be retrieved from the list entry by udev_list_get_name().</td><td> </td><td class="right"> * can be retrieved from the list entry by udev_list_get_name().</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the first entry of the tag list</td><td> </td><td class="right"> * Returns: the first entry of the tag list</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_device_get_tags_list_entry(struct 
udev_device *udev_device)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_device_get_tags_list_entry(struct 
udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0167" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_get_entry(&amp;udev_device-&gt;tags_list);</td><td> </td><td class="rblock">        return udev_list_get_entry(&amp;udev_device-&gt;tags_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_device_has_tag(struct udev_device *udev_device, const 
char *tag)</td><td> </td><td class="right">UDEV_EXPORT int udev_device_has_tag(struct udev_device *udev_device, const 
char *tag)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0168" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">       <span class="insert"> </span>struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0169" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device == NULL)</td><td> </td><td class="rblock">        if (udev_device == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return false;</td><td> </td><td class="rblock">                return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       list_entry = udev_device_get_tags_list_entry(udev_device);</td><td> </td><td class="rblock">        list_entry = udev_device_get_tags_list_entry(udev_device);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_list_entry_get_by_name(list_entry, tag) != NULL)</td><td> </td><td class="rblock">        if (udev_list_entry_get_by_name(list_entry, tag) != NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return true;</td><td> </td><td class="rblock">                return true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return false;</td><td> </td><td class="rblock">        return false;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0170" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#define ENVP_SIZE                      128</td><td> </td><td class="rblock">#define ENVP_SIZE                        128</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#define MONITOR_BUF_SIZE               4096</td><td> </td><td class="rblock">#define MONITOR_BUF_SIZE                4096</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static int update_envp_monitor_buf(struct udev_device *udev_device)</td><td> </td><td class="right">static int update_envp_monitor_buf(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0171" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">        struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char *s;</td><td> </td><td class="rblock">        char *s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       size_t l;</td><td> </td><td class="rblock">        size_t l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned int i;</td><td> </td><td class="rblock">        unsigned int i;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0172" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* monitor buffer of property strings */</td><td> </td><td class="rblock">        /* monitor buffer of property strings */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;monitor_buf);</td><td> </td><td class="rblock">        free(udev_device-&gt;monitor_buf);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;monitor_buf_len = 0;</td><td> </td><td class="rblock">        udev_device-&gt;monitor_buf_len = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;monitor_buf = malloc(MONITOR_BUF_SIZE);</td><td> </td><td class="rblock">        udev_device-&gt;monitor_buf = malloc(MONITOR_BUF_SIZE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;monitor_buf == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;monitor_buf == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0173" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* envp array, strings will point into monitor buffer */</td><td> </td><td class="rblock">        /* envp array, strings will point into monitor buffer */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;envp == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;envp == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;envp = malloc(sizeof(char *) * ENVP_SIZE);</td><td> </td><td class="rblock">                udev_device-&gt;envp = malloc(sizeof(char *) * ENVP_SIZE);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;envp == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;envp == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0174" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       i = 0;</td><td> </td><td class="rblock">        i = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       s = udev_device-&gt;monitor_buf;</td><td> </td><td class="rblock">        s = udev_device-&gt;monitor_buf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       l = MONITOR_BUF_SIZE;</td><td> </td><td class="rblock">        l = MONITOR_BUF_SIZE;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_entry_foreach(list_entry, <span class="delete">udev_device_get_properties_list_</span></td><td> </td><td class="rblock">        udev_list_entry_foreach(list_entry, <span class="insert">udev_device_get_properties_list</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">entry(udev_device))</span> {</td><td> </td><td class="rblock"><span class="insert">_entry(udev_device))</span> {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               const char *key;</td><td> </td><td class="rblock">                const char *key;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0175" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               key = udev_list_entry_get_name(list_entry);</td><td> </td><td class="rblock">                key = udev_list_entry_get_name(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* skip private variables */</td><td> </td><td class="rblock">                /* skip private variables */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (key[0] == '.')</td><td> </td><td class="rblock">                if (key[0] == '.')</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       continue;</td><td> </td><td class="rblock">                        continue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0176" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* add string to envp array */</td><td> </td><td class="rblock">                /* add string to envp array */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device-&gt;envp[i++] = s;</td><td> </td><td class="rblock">                udev_device-&gt;envp[i++] = s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (i+1 &gt;= ENVP_SIZE)</td><td> </td><td class="rblock">                if (i+1 &gt;= ENVP_SIZE)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return -EINVAL;</td><td> </td><td class="rblock">                        return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0177" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* add property string to monitor buffer */</td><td> </td><td class="rblock">                /* add property string to monitor buffer */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               l = util_strpcpyl(&amp;s, l, key, "=", <span class="delete">udev_list_entry_get_value</span></td><td> </td><td class="rblock">                l = util_strpcpyl(&amp;s, l, key, "=", <span class="insert">udev_list_entry_get_valu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">(list_entry),</span> NULL);</td><td> </td><td class="rblock"><span class="insert">e(list_entry),</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (l == 0)</td><td> </td><td class="rblock">                if (l == 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return -EINVAL;</td><td> </td><td class="rblock">                        return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* advance past the trailing '\0' that util_strpcpyl() <span class="delete">guara</span></td><td> </td><td class="rblock">                /* advance past the trailing '\0' that util_strpcpyl() <span class="insert">guar</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ntees</span> */</td><td> </td><td class="rblock"><span class="insert">antees</span> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               s++;</td><td> </td><td class="rblock">                s++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               l--;</td><td> </td><td class="rblock">                l--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;envp[i] = NULL;</td><td> </td><td class="rblock">        udev_device-&gt;envp[i] = NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;monitor_buf_len = s - udev_device-&gt;monitor_buf;</td><td> </td><td class="rblock">        udev_device-&gt;monitor_buf_len = s - udev_device-&gt;monitor_buf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;envp_uptodate = true;</td><td> </td><td class="rblock">        udev_device-&gt;envp_uptodate = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_device-&gt;udev, "filled envp/monitor buffer, %u properties, <span class="delete">%</span></td><td> </td><td class="rblock">        dbg(udev_device-&gt;udev, "filled envp/monitor buffer, %u properties, </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">zu</span> bytes\n",</td><td> </td><td class="rblock"><span class="insert">%zu</span> bytes\n",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           i, udev_device-&gt;monitor_buf_len);</td><td> </td><td class="rblock">            i, udev_device-&gt;monitor_buf_len);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">char **udev_device_get_properties_envp(struct udev_device *udev_device)</td><td> </td><td class="right">char **udev_device_get_properties_envp(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0178" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;envp_uptodate)</td><td> </td><td class="rblock">        if (!udev_device-&gt;envp_uptodate)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (update_envp_monitor_buf(udev_device) != 0)</td><td> </td><td class="rblock">                if (update_envp_monitor_buf(udev_device) != 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return NULL;</td><td> </td><td class="rblock">                        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;envp;</td><td> </td><td class="rblock">        return udev_device-&gt;envp;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">ssize_t udev_device_get_properties_monitor_buf(struct udev_device *udev_dev
ice, const char **buf)</td><td> </td><td class="right">ssize_t udev_device_get_properties_monitor_buf(struct udev_device *udev_dev
ice, const char **buf)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0179" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;envp_uptodate)</td><td> </td><td class="rblock">        if (!udev_device-&gt;envp_uptodate)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (update_envp_monitor_buf(udev_device) != 0)</td><td> </td><td class="rblock">                if (update_envp_monitor_buf(udev_device) != 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return -EINVAL;</td><td> </td><td class="rblock">                        return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       *buf = udev_device-&gt;monitor_buf;</td><td> </td><td class="rblock">        *buf = udev_device-&gt;monitor_buf;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;monitor_buf_len;</td><td> </td><td class="rblock">        return udev_device-&gt;monitor_buf_len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_set_action(struct udev_device *udev_device, const char *act
ion)</td><td> </td><td class="right">int udev_device_set_action(struct udev_device *udev_device, const char *act
ion)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0180" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_device-&gt;action);</td><td> </td><td class="rblock">        free(udev_device-&gt;action);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;action = strdup(action);</td><td> </td><td class="rblock">        udev_device-&gt;action = strdup(action);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_device-&gt;action == NULL)</td><td> </td><td class="rblock">        if (udev_device-&gt;action == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -ENOMEM;</td><td> </td><td class="rblock">                return -ENOMEM;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device_add_property(udev_device, "ACTION", <span class="delete">udev_device-&gt;action)</span></td><td> </td><td class="rblock">        udev_device_add_property(udev_device, "ACTION", <span class="insert">udev_device-&gt;action</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">;</span></td><td> </td><td class="rblock"><span class="insert">);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_get_devlink_priority(struct udev_device *udev_device)</td><td> </td><td class="right">int udev_device_get_devlink_priority(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0181" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;devlink_priority;</td><td> </td><td class="rblock">        return udev_device-&gt;devlink_priority;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_set_devlink_priority(struct udev_device *udev_device, int p
rio)</td><td> </td><td class="right">int udev_device_set_devlink_priority(struct udev_device *udev_device, int p
rio)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0182" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        udev_device-&gt;devlink_priority = prio;</td><td> </td><td class="rblock">         udev_device-&gt;devlink_priority = prio;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_get_watch_handle(struct udev_device *udev_device)</td><td> </td><td class="right">int udev_device_get_watch_handle(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0183" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_device-&gt;info_loaded)</td><td> </td><td class="rblock">        if (!udev_device-&gt;info_loaded)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               udev_device_read_db(udev_device, NULL);</td><td> </td><td class="rblock">                udev_device_read_db(udev_device, NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;watch_handle;</td><td> </td><td class="rblock">        return udev_device-&gt;watch_handle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_device_set_watch_handle(struct udev_device *udev_device, int handl
e)</td><td> </td><td class="right">int udev_device_set_watch_handle(struct udev_device *udev_device, int handl
e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0184" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;watch_handle = handle;</td><td> </td><td class="rblock">        udev_device-&gt;watch_handle = handle;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">        return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">bool udev_device_get_db_persist(struct udev_device *udev_device)</td><td> </td><td class="right">bool udev_device_get_db_persist(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0185" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_device-&gt;db_persist;</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_device-&gt;db_persist;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">void udev_device_set_db_persist(struct udev_device *udev_device)</td><td> </td><td class="right">void udev_device_set_db_persist(struct udev_device *udev_device)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0186" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_device-&gt;db_persist = true;</td><td> </td><td class="rblock">       <span class="insert"> </span>udev_device-&gt;db_persist = true;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 186 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>1129 lines changed or deleted</i></th><th><i> </i></th><th><i>1085 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
