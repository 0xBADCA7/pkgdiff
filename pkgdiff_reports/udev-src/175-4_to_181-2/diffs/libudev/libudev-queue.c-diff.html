<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux aponomarenko 3.0.0-14-generic #23-Ubuntu SMP Mon Nov 21 20:28:43 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 3.1.8 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.0 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 0.6.5 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: libudev-queue.c - libudev-queue.c</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;libudev-queue.c&nbsp;</th><th> </th><th>&nbsp;libudev-queue.c&nbsp;</th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l1" /><small>skipping to change at</small><em> line 43</em></th><th> </th><th><a name="part-r1" /><small>skipping to change at</small><em> line 43</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * event processing queue, and the current event sequence numbers from the 
kernel</td><td> </td><td class="right"> * event processing queue, and the current event sequence numbers from the 
kernel</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * and the udev daemon.</td><td> </td><td class="right"> * and the udev daemon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue:</td><td> </td><td class="right"> * udev_queue:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Opaque object representing the current event queue in the udev daemon.</td><td> </td><td class="right"> * Opaque object representing the current event queue in the udev daemon.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> */</td><td> </td><td class="right"> */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_queue {</td><td> </td><td class="right">struct udev_queue {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev *udev;</td><td> </td><td class="rblock">        struct udev *udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int refcount;</td><td> </td><td class="rblock">        int refcount;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_list queue_list;</td><td> </td><td class="rblock">        struct udev_list queue_list;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">};</td><td> </td><td class="right">};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_new:</td><td> </td><td class="right"> * udev_queue_new:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev: udev library context</td><td> </td><td class="right"> * @udev: udev library context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * The initial refcount is 1, and needs to be decremented to</td><td> </td><td class="right"> * The initial refcount is 1, and needs to be decremented to</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * release the resources of the udev queue context.</td><td> </td><td class="right"> * release the resources of the udev queue context.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the udev queue context, or #NULL on error.</td><td> </td><td class="right"> * Returns: the udev queue context, or #NULL on error.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_queue *udev_queue_new(struct udev *udev)</td><td> </td><td class="right">UDEV_EXPORT struct udev_queue *udev_queue_new(struct udev *udev)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       struct udev_queue *udev_queue;</td><td> </td><td class="rblock">       <span class="insert"> </span>struct udev_queue *udev_queue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev == NULL)</td><td> </td><td class="rblock">        if (udev == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_queue = calloc(1, sizeof(struct udev_queue));</td><td> </td><td class="rblock">        udev_queue = calloc(1, sizeof(struct udev_queue));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_queue-&gt;refcount = 1;</td><td> </td><td class="rblock">        udev_queue-&gt;refcount = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_queue-&gt;udev = udev;</td><td> </td><td class="rblock">        udev_queue-&gt;udev = udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_init(udev, &amp;udev_queue-&gt;queue_list, false);</td><td> </td><td class="rblock">        udev_list_init(udev, &amp;udev_queue-&gt;queue_list, false);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_queue;</td><td> </td><td class="rblock">        return udev_queue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_ref:</td><td> </td><td class="right"> * udev_queue_ref:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Take a reference of a udev queue context.</td><td> </td><td class="right"> * Take a reference of a udev queue context.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the same udev queue context.</td><td> </td><td class="right"> * Returns: the same udev queue context.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_queue *udev_queue_ref(struct udev_queue *udev_queue
)</td><td> </td><td class="right">UDEV_EXPORT struct udev_queue *udev_queue_ref(struct udev_queue *udev_queue
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_queue-&gt;refcount++;</td><td> </td><td class="rblock">        udev_queue-&gt;refcount++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_queue;</td><td> </td><td class="rblock">        return udev_queue;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_unref:</td><td> </td><td class="right"> * udev_queue_unref:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Drop a reference of a udev queue context. If the refcount reaches zero,</td><td> </td><td class="right"> * Drop a reference of a udev queue context. If the refcount reaches zero,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * the resources of the queue context will be released.</td><td> </td><td class="right"> * the resources of the queue context will be released.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT void udev_queue_unref(struct udev_queue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT void udev_queue_unref(struct udev_queue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return;</td><td> </td><td class="rblock">                return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_queue-&gt;refcount--;</td><td> </td><td class="rblock">        udev_queue-&gt;refcount--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue-&gt;refcount &gt; 0)</td><td> </td><td class="rblock">        if (udev_queue-&gt;refcount &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return;</td><td> </td><td class="rblock">                return;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_queue-&gt;queue_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_queue-&gt;queue_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       free(udev_queue);</td><td> </td><td class="rblock">        free(udev_queue);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_udev:</td><td> </td><td class="right"> * udev_queue_get_udev:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Retrieve the udev library context the queue context was created with.</td><td> </td><td class="right"> * Retrieve the udev library context the queue context was created with.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the udev library context.</td><td> </td><td class="right"> * Returns: the udev library context.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev *udev_queue_get_udev(struct udev_queue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT struct udev *udev_queue_get_udev(struct udev_queue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_queue-&gt;udev;</td><td> </td><td class="rblock">        return udev_queue-&gt;udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">unsigned long long int udev_get_kernel_seqnum(struct udev *udev)</td><td> </td><td class="right">unsigned long long int udev_get_kernel_seqnum(struct udev *udev)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char filename[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char filename[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum;</td><td> </td><td class="rblock">        unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int fd;</td><td> </td><td class="rblock">        int fd;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char buf[32];</td><td> </td><td class="rblock">        char buf[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       ssize_t len;</td><td> </td><td class="rblock">        ssize_t len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(filename, sizeof(filename), udev_get_sys_path(udev), <span class="delete">"</span></td><td> </td><td class="rblock">        util_strscpyl(filename, sizeof(filename), udev_get_sys_path(udev), </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">/kernel/uevent_seqnum",</span> NULL);</td><td> </td><td class="rblock"><span class="insert">"/kernel/uevent_seqnum",</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fd = open(filename, O_RDONLY|O_CLOEXEC);</td><td> </td><td class="rblock">        fd = open(filename, O_RDONLY|O_CLOEXEC);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fd &lt; 0)</td><td> </td><td class="rblock">        if (fd &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       len = read(fd, buf, sizeof(buf));</td><td> </td><td class="rblock">        len = read(fd, buf, sizeof(buf));</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       close(fd);</td><td> </td><td class="rblock">        close(fd);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (len &lt;= 2)</td><td> </td><td class="rblock">        if (len &lt;= 2)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       buf[len-1] = '\0';</td><td> </td><td class="rblock">        buf[len-1] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       seqnum = strtoull(buf, NULL, 10);</td><td> </td><td class="rblock">        seqnum = strtoull(buf, NULL, 10);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return seqnum;</td><td> </td><td class="rblock">        return seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_kernel_seqnum:</td><td> </td><td class="right"> * udev_queue_get_kernel_seqnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the current kernel event sequence number.</td><td> </td><td class="right"> * Returns: the current kernel event sequence number.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT unsigned long long int udev_queue_get_kernel_seqnum(struct udev
_queue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT unsigned long long int udev_queue_get_kernel_seqnum(struct udev
_queue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum;</td><td> </td><td class="rblock">       <span class="insert"> </span>unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       seqnum = udev_get_kernel_seqnum(udev_queue-&gt;udev);</td><td> </td><td class="rblock">        seqnum = udev_get_kernel_seqnum(udev_queue-&gt;udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_queue-&gt;udev, "seqnum=%llu\n", seqnum);</td><td> </td><td class="rblock">        dbg(udev_queue-&gt;udev, "seqnum=%llu\n", seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return seqnum;</td><td> </td><td class="rblock">        return seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">int udev_queue_read_seqnum(FILE *queue_file, unsigned long long int *seqnum
)</td><td> </td><td class="right">int udev_queue_read_seqnum(FILE *queue_file, unsigned long long int *seqnum
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fread(seqnum, sizeof(unsigned long long int), 1, queue_file) != </td><td> </td><td class="rblock">        if (fread(seqnum, sizeof(unsigned long long int), 1, queue_file) !=</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">1)</td><td> </td><td class="rblock"> 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 0;</td><td> </td><td class="rblock">       <span class="insert"> </span>return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">ssize_t udev_queue_skip_devpath(FILE *queue_file)</td><td> </td><td class="right">ssize_t udev_queue_skip_devpath(FILE *queue_file)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned short int len;</td><td> </td><td class="rblock">       <span class="insert"> </span>unsigned short int len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fread(&amp;len, sizeof(unsigned short int), 1, queue_file) == 1) {</td><td> </td><td class="rblock">        if (fread(&amp;len, sizeof(unsigned short int), 1, queue_file) == 1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char devpath[len];</td><td> </td><td class="rblock">                char devpath[len];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0017" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /* use fread to skip, fseek might drop buffered data */</td><td> </td><td class="rblock">                /* use fread to skip, fseek might drop buffered data */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (fread(devpath, 1, len, queue_file) == len)</td><td> </td><td class="rblock">                if (fread(devpath, 1, len, queue_file) == len)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return len;</td><td> </td><td class="rblock">                        return len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0018" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return -1;</td><td> </td><td class="rblock">       <span class="insert"> </span>return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">ssize_t udev_queue_read_devpath(FILE *queue_file, char *devpath, size_t siz
e)</td><td> </td><td class="right">ssize_t udev_queue_read_devpath(FILE *queue_file, char *devpath, size_t siz
e)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0019" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned short int read_bytes = 0;</td><td> </td><td class="rblock">        unsigned short int read_bytes = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned short int len;</td><td> </td><td class="rblock">        unsigned short int len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0020" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fread(&amp;len, sizeof(unsigned short int), 1, queue_file) != 1)</td><td> </td><td class="rblock">        if (fread(&amp;len, sizeof(unsigned short int), 1, queue_file) != 1)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0021" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       read_bytes = (len &lt; size - 1) ? len : size - 1;</td><td> </td><td class="rblock">        read_bytes = (len &lt; size - 1) ? len : size - 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (fread(devpath, 1, read_bytes, queue_file) != read_bytes)</td><td> </td><td class="rblock">        if (fread(devpath, 1, read_bytes, queue_file) != read_bytes)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -1;</td><td> </td><td class="rblock">                return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       devpath[read_bytes] = '\0';</td><td> </td><td class="rblock">        devpath[read_bytes] = '\0';</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0022" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /* if devpath was too long, skip unread characters */</td><td> </td><td class="rblock">        /* if devpath was too long, skip unread characters */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (read_bytes != len) {</td><td> </td><td class="rblock">        if (read_bytes != len) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               unsigned short int skip_bytes = len - read_bytes;</td><td> </td><td class="rblock">                unsigned short int skip_bytes = len - read_bytes;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char buf[skip_bytes];</td><td> </td><td class="rblock">                char buf[skip_bytes];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0023" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (fread(buf, 1, skip_bytes, queue_file) != skip_bytes)</td><td> </td><td class="rblock">                if (fread(buf, 1, skip_bytes, queue_file) != skip_bytes)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       return -1;</td><td> </td><td class="rblock">                        return -1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0024" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return read_bytes;</td><td> </td><td class="rblock">       <span class="insert"> </span>return read_bytes;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">static FILE *open_queue_file(struct udev_queue *udev_queue, unsigned long l
ong int *seqnum_start)</td><td> </td><td class="right">static FILE *open_queue_file(struct udev_queue *udev_queue, unsigned long l
ong int *seqnum_start)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0025" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       char filename[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">        char filename[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0026" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       util_strscpyl(filename, sizeof(filename), <span class="delete">udev_get_run_path(udev_que</span></td><td> </td><td class="rblock">        util_strscpyl(filename, sizeof(filename), <span class="insert">udev_get_run_path(udev_qu</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">ue-&gt;udev),</span> "/queue.bin", NULL);</td><td> </td><td class="rblock"><span class="insert">eue-&gt;udev),</span> "/queue.bin", NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = fopen(filename, "re");</td><td> </td><td class="rblock">        queue_file = fopen(filename, "re");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0027" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue_read_seqnum(queue_file, seqnum_start) &lt; 0) {</td><td> </td><td class="rblock">        if (udev_queue_read_seqnum(queue_file, seqnum_start) &lt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               err(udev_queue-&gt;udev, "corrupt queue file\n");</td><td> </td><td class="rblock">                err(udev_queue-&gt;udev, "corrupt queue file\n");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               fclose(queue_file);</td><td> </td><td class="rblock">                fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0028" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return queue_file;</td><td> </td><td class="rblock">       <span class="insert"> </span>return queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_udev_seqnum:</td><td> </td><td class="right"> * udev_queue_get_udev_seqnum:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the last known udev event sequence number.</td><td> </td><td class="right"> * Returns: the last known udev event sequence number.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT unsigned long long int udev_queue_get_udev_seqnum(struct udev_q
ueue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT unsigned long long int udev_queue_get_udev_seqnum(struct udev_q
ueue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0029" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum_udev;</td><td> </td><td class="rblock">        unsigned long long int seqnum_udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0030" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = open_queue_file(udev_queue, &amp;seqnum_udev);</td><td> </td><td class="rblock">        queue_file = open_queue_file(udev_queue, &amp;seqnum_udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0031" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (;;) {</td><td> </td><td class="rblock">        for (;;) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               unsigned long long int seqnum;</td><td> </td><td class="rblock">                unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ssize_t devpath_len;</td><td> </td><td class="rblock">                ssize_t devpath_len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0032" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td> </td><td class="rblock">                if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               devpath_len = udev_queue_skip_devpath(queue_file);</td><td> </td><td class="rblock">                devpath_len = udev_queue_skip_devpath(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len &lt; 0)</td><td> </td><td class="rblock">                if (devpath_len &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len &gt; 0)</td><td> </td><td class="rblock">                if (devpath_len &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       seqnum_udev = seqnum;</td><td> </td><td class="rblock">                        seqnum_udev = seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0033" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(queue_file);</td><td> </td><td class="rblock">        fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return seqnum_udev;</td><td> </td><td class="rblock">        return seqnum_udev;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_udev_is_active:</td><td> </td><td class="right"> * udev_queue_get_udev_is_active:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a flag indicating if udev is active.</td><td> </td><td class="right"> * Returns: a flag indicating if udev is active.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_queue_get_udev_is_active(struct udev_queue *udev_queue
)</td><td> </td><td class="right">UDEV_EXPORT int udev_queue_get_udev_is_active(struct udev_queue *udev_queue
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0034" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum_start;</td><td> </td><td class="rblock">        unsigned long long int seqnum_start;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0035" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = open_queue_file(udev_queue, &amp;seqnum_start);</td><td> </td><td class="rblock">        queue_file = open_queue_file(udev_queue, &amp;seqnum_start);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0036" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(queue_file);</td><td> </td><td class="rblock">        fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 1;</td><td> </td><td class="rblock">        return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_queue_is_empty:</td><td> </td><td class="right"> * udev_queue_get_queue_is_empty:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a flag indicating if udev is currently handling events.</td><td> </td><td class="right"> * Returns: a flag indicating if udev is currently handling events.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_queue_get_queue_is_empty(struct udev_queue *udev_queue
)</td><td> </td><td class="right">UDEV_EXPORT int udev_queue_get_queue_is_empty(struct udev_queue *udev_queue
)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0037" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum_kernel;</td><td> </td><td class="rblock">        unsigned long long int seqnum_kernel;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum_udev = 0;</td><td> </td><td class="rblock">        unsigned long long int seqnum_udev = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int queued = 0;</td><td> </td><td class="rblock">        int queued = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int is_empty = 0;</td><td> </td><td class="rblock">        int is_empty = 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0038" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = open_queue_file(udev_queue, &amp;seqnum_udev);</td><td> </td><td class="rblock">        queue_file = open_queue_file(udev_queue, &amp;seqnum_udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 1;</td><td> </td><td class="rblock">                return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0039" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (;;) {</td><td> </td><td class="rblock">        for (;;) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               unsigned long long int seqnum;</td><td> </td><td class="rblock">                unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ssize_t devpath_len;</td><td> </td><td class="rblock">                ssize_t devpath_len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0040" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td> </td><td class="rblock">                if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               devpath_len = udev_queue_skip_devpath(queue_file);</td><td> </td><td class="rblock">                devpath_len = udev_queue_skip_devpath(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len &lt; 0)</td><td> </td><td class="rblock">                if (devpath_len &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0041" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len &gt; 0) {</td><td> </td><td class="rblock">                if (devpath_len &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       queued++;</td><td> </td><td class="rblock">                        queued++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       seqnum_udev = seqnum;</td><td> </td><td class="rblock">                        seqnum_udev = seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">                } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       queued--;</td><td> </td><td class="rblock">                        queued--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0042" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queued &gt; 0) {</td><td> </td><td class="rblock">        if (queued &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_queue-&gt;udev, "queue is not empty\n");</td><td> </td><td class="rblock">                dbg(udev_queue-&gt;udev, "queue is not empty\n");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0043" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       seqnum_kernel = udev_queue_get_kernel_seqnum(udev_queue);</td><td> </td><td class="rblock">        seqnum_kernel = udev_queue_get_kernel_seqnum(udev_queue);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (seqnum_udev &lt; seqnum_kernel) {</td><td> </td><td class="rblock">        if (seqnum_udev &lt; seqnum_kernel) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               dbg(udev_queue-&gt;udev, "queue is empty but kernel events <span class="delete">stil</span></td><td> </td><td class="rblock">                dbg(udev_queue-&gt;udev, "queue is empty but kernel events <span class="insert">sti</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">l</span> pending [%llu]&lt;-&gt;[%llu]\n",</td><td> </td><td class="rblock"><span class="insert">ll</span> pending [%llu]&lt;-&gt;[%llu]\n",</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       seqnum_kernel, seqnum_udev);</td><td> </td><td class="rblock">                                        seqnum_kernel, seqnum_udev);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               goto out;</td><td> </td><td class="rblock">                goto out;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0044" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_queue-&gt;udev, "queue is empty\n");</td><td> </td><td class="rblock">        dbg(udev_queue-&gt;udev, "queue is empty\n");</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       is_empty = 1;</td><td> </td><td class="rblock">        is_empty = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">out:</td><td> </td><td class="right">out:</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0045" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(queue_file);</td><td> </td><td class="rblock">        fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return is_empty;</td><td> </td><td class="rblock">        return is_empty;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_seqnum_sequence_is_finished:</td><td> </td><td class="right"> * udev_queue_get_seqnum_sequence_is_finished:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @start: first event sequence number</td><td> </td><td class="right"> * @start: first event sequence number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @end: last event sequence number</td><td> </td><td class="right"> * @end: last event sequence number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a flag indicating if any of the sequence numbers in the given r
ange is currently active.</td><td> </td><td class="right"> * Returns: a flag indicating if any of the sequence numbers in the given r
ange is currently active.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_queue_get_seqnum_sequence_is_finished(struct udev_queu
e *udev_queue,</td><td> </td><td class="right">UDEV_EXPORT int udev_queue_get_seqnum_sequence_is_finished(struct udev_queu
e *udev_queue,</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0046" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                              <span class="delete">unsigned long long int start,
</span> unsigned long long int end)</td><td> </td><td class="rblock">                                              <span class="insert"> unsigned long long int start
,</span> unsigned long long int end)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0047" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum;</td><td> </td><td class="rblock">        unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       ssize_t devpath_len;</td><td> </td><td class="rblock">        ssize_t devpath_len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       int unfinished;</td><td> </td><td class="rblock">        int unfinished;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0048" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EINVAL;</td><td> </td><td class="rblock">                return -EINVAL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = open_queue_file(udev_queue, &amp;seqnum);</td><td> </td><td class="rblock">        queue_file = open_queue_file(udev_queue, &amp;seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 1;</td><td> </td><td class="rblock">                return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (start &lt; seqnum)</td><td> </td><td class="rblock">        if (start &lt; seqnum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               start = seqnum;</td><td> </td><td class="rblock">                start = seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (start &gt; end) {</td><td> </td><td class="rblock">        if (start &gt; end) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               fclose(queue_file);</td><td> </td><td class="rblock">                fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 1;</td><td> </td><td class="rblock">                return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (end - start &gt; INT_MAX - 1) {</td><td> </td><td class="rblock">        if (end - start &gt; INT_MAX - 1) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               fclose(queue_file);</td><td> </td><td class="rblock">                fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return -EOVERFLOW;</td><td> </td><td class="rblock">                return -EOVERFLOW;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0049" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       /*</td><td> </td><td class="rblock">        /*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        * we might start with 0, and handle the initial seqnum</td><td> </td><td class="rblock">         * we might start with 0, and handle the initial seqnum</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        * only when we find an entry in the queue file</td><td> </td><td class="rblock">         * only when we find an entry in the queue file</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">        **/</td><td> </td><td class="rblock">         **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unfinished = end - start;</td><td> </td><td class="rblock">        unfinished = end - start;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0050" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       do {</td><td> </td><td class="rblock">        do {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td> </td><td class="rblock">                if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               devpath_len = udev_queue_skip_devpath(queue_file);</td><td> </td><td class="rblock">                devpath_len = udev_queue_skip_devpath(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len &lt; 0)</td><td> </td><td class="rblock">                if (devpath_len &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0051" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               /*</td><td> </td><td class="rblock">                /*</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                * we might start with an empty or re-build queue file, <span class="delete">wher</span></td><td> </td><td class="rblock">                 * we might start with an empty or re-build queue file, <span class="insert">whe</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">e</span></td><td> </td><td class="rblock"><span class="insert">re</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                * the initial seqnum is not recorded as finished</td><td> </td><td class="rblock">                 * the initial seqnum is not recorded as finished</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                */</td><td> </td><td class="rblock">                 */</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (start == seqnum &amp;&amp; devpath_len &gt; 0)</td><td> </td><td class="rblock">                if (start == seqnum &amp;&amp; devpath_len &gt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       unfinished++;</td><td> </td><td class="rblock">                        unfinished++;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0052" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (devpath_len == 0) {</td><td> </td><td class="rblock">                if (devpath_len == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       if (seqnum &gt;= start &amp;&amp; seqnum &lt;= end)</td><td> </td><td class="rblock">                        if (seqnum &gt;= start &amp;&amp; seqnum &lt;= end)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               unfinished--;</td><td> </td><td class="rblock">                                unfinished--;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       } while (unfinished &gt; 0);</td><td> </td><td class="rblock">        } while (unfinished &gt; 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0053" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(queue_file);</td><td> </td><td class="rblock">       <span class="insert"> </span>fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0054" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return (unfinished == 0);</td><td> </td><td class="rblock">       <span class="insert"> </span>return (unfinished == 0);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_seqnum_is_finished:</td><td> </td><td class="right"> * udev_queue_get_seqnum_is_finished:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @seqnum: sequence number</td><td> </td><td class="right"> * @seqnum: sequence number</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: a flag indicating if the given sequence number is currently act
ive.</td><td> </td><td class="right"> * Returns: a flag indicating if the given sequence number is currently act
ive.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT int udev_queue_get_seqnum_is_finished(struct udev_queue *udev_q
ueue, unsigned long long int seqnum)</td><td> </td><td class="right">UDEV_EXPORT int udev_queue_get_seqnum_is_finished(struct udev_queue *udev_q
ueue, unsigned long long int seqnum)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0055" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (!udev_queue_get_seqnum_sequence_is_finished(udev_queue, seqnum, </td><td> </td><td class="rblock">        if (!udev_queue_get_seqnum_sequence_is_finished(udev_queue, seqnum,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">seqnum))</td><td> </td><td class="rblock"> seqnum))</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return 0;</td><td> </td><td class="rblock">                return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0056" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       dbg(udev_queue-&gt;udev, "seqnum: %llu finished\n", seqnum);</td><td> </td><td class="rblock">        dbg(udev_queue-&gt;udev, "seqnum: %llu finished\n", seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return 1;</td><td> </td><td class="rblock">        return 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">/**</td><td> </td><td class="right">/**</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * udev_queue_get_queued_list_entry:</td><td> </td><td class="right"> * udev_queue_get_queued_list_entry:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * @udev_queue: udev queue context</td><td> </td><td class="right"> * @udev_queue: udev queue context</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> *</td><td> </td><td class="right"> *</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> * Returns: the first entry of the list of queued events.</td><td> </td><td class="right"> * Returns: the first entry of the list of queued events.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"> **/</td><td> </td><td class="right"> **/</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_queue_get_queued_list_entry(struct
 udev_queue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_queue_get_queued_list_entry(struct
 udev_queue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0057" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       unsigned long long int seqnum;</td><td> </td><td class="rblock">        unsigned long long int seqnum;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       FILE *queue_file;</td><td> </td><td class="rblock">        FILE *queue_file;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0058" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (udev_queue == NULL)</td><td> </td><td class="rblock">        if (udev_queue == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       udev_list_cleanup(&amp;udev_queue-&gt;queue_list);</td><td> </td><td class="rblock">        udev_list_cleanup(&amp;udev_queue-&gt;queue_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0059" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       queue_file = open_queue_file(udev_queue, &amp;seqnum);</td><td> </td><td class="rblock">        queue_file = open_queue_file(udev_queue, &amp;seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       if (queue_file == NULL)</td><td> </td><td class="rblock">        if (queue_file == NULL)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               return NULL;</td><td> </td><td class="rblock">                return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0060" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       for (;;) {</td><td> </td><td class="rblock">        for (;;) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char syspath[UTIL_PATH_SIZE];</td><td> </td><td class="rblock">                char syspath[UTIL_PATH_SIZE];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char *s;</td><td> </td><td class="rblock">                char *s;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               size_t l;</td><td> </td><td class="rblock">                size_t l;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               ssize_t len;</td><td> </td><td class="rblock">                ssize_t len;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               char seqnum_str[32];</td><td> </td><td class="rblock">                char seqnum_str[32];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               struct udev_list_entry *list_entry;</td><td> </td><td class="rblock">                struct udev_list_entry *list_entry;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0061" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td> </td><td class="rblock">                if (udev_queue_read_seqnum(queue_file, &amp;seqnum) &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               snprintf(seqnum_str, sizeof(seqnum_str), "%llu", seqnum);</td><td> </td><td class="rblock">                snprintf(seqnum_str, sizeof(seqnum_str), "%llu", seqnum);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0062" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               s = syspath;</td><td> </td><td class="rblock">                s = syspath;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               l = util_strpcpyl(&amp;s, sizeof(syspath), <span class="delete">udev_get_sys_path(ude</span></td><td> </td><td class="rblock">                l = util_strpcpyl(&amp;s, sizeof(syspath), <span class="insert">udev_get_sys_path(ud</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">v_queue-&gt;udev),</span> NULL);</td><td> </td><td class="rblock"><span class="insert">ev_queue-&gt;udev),</span> NULL);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               len = udev_queue_read_devpath(queue_file, s, l);</td><td> </td><td class="rblock">                len = udev_queue_read_devpath(queue_file, s, l);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (len &lt; 0)</td><td> </td><td class="rblock">                if (len &lt; 0)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       break;</td><td> </td><td class="rblock">                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0063" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               if (len &gt; 0) {</td><td> </td><td class="rblock">                if (len &gt; 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_add(&amp;udev_queue-&gt;queue_list, <span class="delete">syspath</span></td><td> </td><td class="rblock">                        udev_list_entry_add(&amp;udev_queue-&gt;queue_list, <span class="insert">syspat</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">,</span> seqnum_str);</td><td> </td><td class="rblock"><span class="insert">h,</span> seqnum_str);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               } else {</td><td> </td><td class="rblock">                } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       udev_list_entry_foreach(list_entry, <span class="delete">udev_list_get_en</span></td><td> </td><td class="rblock">                        udev_list_entry_foreach(list_entry, <span class="insert">udev_list_get_e</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">try(&amp;udev_queue-&gt;queue_list))</span> {</td><td> </td><td class="rblock"><span class="insert">ntry(&amp;udev_queue-&gt;queue_list))</span> {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               if (strcmp(seqnum_str, <span class="delete">udev_list_entry_get_v</span></td><td> </td><td class="rblock">                                if (strcmp(seqnum_str, <span class="insert">udev_list_entry_get_</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete">alue(list_entry))</span> == 0) {</td><td> </td><td class="rblock"><span class="insert">value(list_entry))</span> == 0) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       udev_list_entry_delete(list_entry);</td><td> </td><td class="rblock">                                        udev_list_entry_delete(list_entry);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                                       break;</td><td> </td><td class="rblock">                                        break;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                               }</td><td> </td><td class="rblock">                                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                       }</td><td> </td><td class="rblock">                        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               }</td><td> </td><td class="rblock">                }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       }</td><td> </td><td class="rblock">        }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       fclose(queue_file);</td><td> </td><td class="rblock">        fclose(queue_file);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0064" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return udev_list_get_entry(&amp;udev_queue-&gt;queue_list);</td><td> </td><td class="rblock">       <span class="insert"> </span>return udev_list_get_entry(&amp;udev_queue-&gt;queue_list);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">struct udev_list_entry *udev_queue_get_failed_list_entry(struct udev_queue 
*udev_queue);</td><td> </td><td class="right">struct udev_list_entry *udev_queue_get_failed_list_entry(struct udev_queue 
*udev_queue);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">UDEV_EXPORT struct udev_list_entry *udev_queue_get_failed_list_entry(struct
 udev_queue *udev_queue)</td><td> </td><td class="right">UDEV_EXPORT struct udev_list_entry *udev_queue_get_failed_list_entry(struct
 udev_queue *udev_queue)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">{</td><td> </td><td class="right">{</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0065" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       errno = ENOSYS;</td><td> </td><td class="rblock">        errno = ENOSYS;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">       return NULL;</td><td> </td><td class="rblock">        return NULL;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 65 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>248 lines changed or deleted</i></th><th><i> </i></th><th><i>248 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
