<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.41: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux aponomarenko 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 3.1.8 --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.2 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 0.6.5 --> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: glib-mkenums - glib-mkenums</title> 
  <style type="text/css"> 
    body    { font-size:16px; margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: Consolas, "DejaVu Sans Mono", "Droid Sans Mono", Monaco, Monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
  </style> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr bgcolor="orange"><th></th><th>&nbsp;glib-mkenums&nbsp;</th><th> </th><th>&nbsp;glib-mkenums&nbsp;</th><th></th></tr> 
      <tr><td><a name="diff0001" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">#!<span class="delete">/usr/bin/perl5 -w</span></td><td> </td><td class="rblock">#!<span class="insert"> /usr/bin/perl5</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0002" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">use warnings;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">use File::Basename;</td><td> </td><td class="right">use File::Basename;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0003" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">use Safe;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"># glib-mkenums.pl</td><td> </td><td class="right"># glib-mkenums.pl</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"># Information about the current enumeration</td><td> </td><td class="right"># Information about the current enumeration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $flags;                     # Is enumeration a bitmask?</td><td> </td><td class="right">my $flags;                     # Is enumeration a bitmask?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $option_underscore_name;    # Overriden underscore variant of the enum n
ame</td><td> </td><td class="right">my $option_underscore_name;    # Overriden underscore variant of the enum n
ame</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # for example to fix the cases we don't get 
the</td><td> </td><td class="right">                               # for example to fix the cases we don't get 
the</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # mixed-case -&gt; underscorized transform righ
t.</td><td> </td><td class="right">                               # mixed-case -&gt; underscorized transform righ
t.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $option_lowercase_name;     # DEPRECATED.  A lower case name to use as p
art</td><td> </td><td class="right">my $option_lowercase_name;     # DEPRECATED.  A lower case name to use as p
art</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # of the *_get_type() function, instead of t
he</td><td> </td><td class="right">                               # of the *_get_type() function, instead of t
he</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # one that we guess. For instance, when an e
num</td><td> </td><td class="right">                               # one that we guess. For instance, when an e
num</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # uses abnormal capitalization and we can no
t</td><td> </td><td class="right">                               # uses abnormal capitalization and we can no
t</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                               # guess where to put the underscores.</td><td> </td><td class="right">                               # guess where to put the underscores.</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $seenbitshift;              # Have we seen bitshift operators?</td><td> </td><td class="right">my $seenbitshift;              # Have we seen bitshift operators?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $enum_prefix;               # Prefix for this enumeration</td><td> </td><td class="right">my $enum_prefix;               # Prefix for this enumeration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $enumname;                  # Name for this enumeration</td><td> </td><td class="right">my $enumname;                  # Name for this enumeration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $enumshort;                 # $enumname without prefix</td><td> </td><td class="right">my $enumshort;                 # $enumname without prefix</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $enumname_prefix;           # prefix of $enumname</td><td> </td><td class="right">my $enumname_prefix;           # prefix of $enumname</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $enumindex = 0;             # Global enum counter</td><td> </td><td class="right">my $enumindex = 0;             # Global enum counter</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $firstenum = 1;             # Is this the first enumeration per file?</td><td> </td><td class="right">my $firstenum = 1;             # Is this the first enumeration per file?</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my @entries;                   # [ $name, $val ] for each entry</td><td> </td><td class="right">my @entries;                   # [ $name, $val ] for each entry</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0004" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">my $sandbox = Safe-&gt;new;        # sandbox for safe evaluation of expression
s</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">sub parse_trigraph {</td><td> </td><td class="right">sub parse_trigraph {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    my $opts = shift;</td><td> </td><td class="right">    my $opts = shift;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    my @opts;</td><td> </td><td class="right">    my @opts;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    for $opt (split /\s*,\s*/, $opts) {</td><td> </td><td class="right">    for $opt (split /\s*,\s*/, $opts) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       $opt =~ s/^\s*//;</td><td> </td><td class="right">       $opt =~ s/^\s*//;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       $opt =~ s/\s*$//;</td><td> </td><td class="right">       $opt =~ s/\s*$//;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">        my ($key,$val) = $opt =~ /(\w+)(?:=(.+))?/;</td><td> </td><td class="right">        my ($key,$val) = $opt =~ /(\w+)(?:=(.+))?/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       defined $val or $val = 1;</td><td> </td><td class="right">       defined $val or $val = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l2" /><small>skipping to change at</small><em> line 113</em></th><th> </th><th><a name="part-r2" /><small>skipping to change at</small><em> line 116</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             @x) {</td><td> </td><td class="right">             @x) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            my ($name, $value, $options) = ($1,$2,$3);</td><td> </td><td class="right">            my ($name, $value, $options) = ($1,$2,$3);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           if (!defined $flags &amp;&amp; defined $value &amp;&amp; $value =~ /&lt;&lt;/) {</td><td> </td><td class="right">           if (!defined $flags &amp;&amp; defined $value &amp;&amp; $value =~ /&lt;&lt;/) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $seenbitshift = 1;</td><td> </td><td class="right">               $seenbitshift = 1;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           }</td><td> </td><td class="right">           }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           if (defined $options) {</td><td> </td><td class="right">           if (defined $options) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               my %options = parse_trigraph($options);</td><td> </td><td class="right">               my %options = parse_trigraph($options);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!defined $options{skip}) {</td><td> </td><td class="right">               if (!defined $options{skip}) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0005" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">                   push @entries, [ $name, $options{nick} ];</td><td> </td><td class="rblock">                   push @entries, [ $name, $<span class="insert">value, $</span>options{nick} ];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           } else {</td><td> </td><td class="right">           } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0006" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               push @entries, [ $name ];</td><td> </td><td class="rblock">               push @entries, [ $name<span class="insert">, $value</span> ];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           }</td><td> </td><td class="right">           }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } elsif (m@^\s*\#@) {</td><td> </td><td class="right">       } elsif (m@^\s*\#@) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           # ignore preprocessor directives</td><td> </td><td class="right">           # ignore preprocessor directives</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else {</td><td> </td><td class="right">       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           print STDERR "$0: $file_name:$.: Failed to parse `$_'\n";</td><td> </td><td class="right">           print STDERR "$0: $file_name:$.: Failed to parse `$_'\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    }</td><td> </td><td class="right">    }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    return 0;</td><td> </td><td class="right">    return 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">sub version {</td><td> </td><td class="right">sub version {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0007" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">    print "glib-mkenums version glib-2.2<span class="delete">4.1</span>\n";</td><td> </td><td class="rblock">    print "glib-mkenums version glib-2.2<span class="insert">8.8</span>\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "glib-mkenums comes with ABSOLUTELY NO WARRANTY.\n";</td><td> </td><td class="right">    print "glib-mkenums comes with ABSOLUTELY NO WARRANTY.\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "You may redistribute copies of glib-mkenums under the terms of\n
";</td><td> </td><td class="right">    print "You may redistribute copies of glib-mkenums under the terms of\n
";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "the GNU General Public License which can be found in the\n";</td><td> </td><td class="right">    print "the GNU General Public License which can be found in the\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "GLib source package. Sources, examples and contact\n";</td><td> </td><td class="right">    print "GLib source package. Sources, examples and contact\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "information are available at http://www.gtk.org\n";</td><td> </td><td class="right">    print "information are available at http://www.gtk.org\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    exit 0;</td><td> </td><td class="right">    exit 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">sub usage {</td><td> </td><td class="right">sub usage {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "Usage:\n";</td><td> </td><td class="right">    print "Usage:\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  glib-mkenums [OPTION...] [FILES...]\n\n";</td><td> </td><td class="right">    print "  glib-mkenums [OPTION...] [FILES...]\n\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l3" /><small>skipping to change at</small><em> line 161</em></th><th> </th><th><a name="part-r3" /><small>skipping to change at</small><em> line 164</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  --template file       Template file\n";</td><td> </td><td class="right">    print "  --template file       Template file\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  -v, --version         Print version informations\n\n";</td><td> </td><td class="right">    print "  -v, --version         Print version informations\n\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "Production text substitutions:\n";</td><td> </td><td class="right">    print "Production text substitutions:\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@EnumName\@            PrefixTheXEnum\n";</td><td> </td><td class="right">    print "  \@EnumName\@            PrefixTheXEnum\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@enum_name\@           prefix_the_xenum\n";</td><td> </td><td class="right">    print "  \@enum_name\@           prefix_the_xenum\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@ENUMNAME\@            PREFIX_THE_XENUM\n";</td><td> </td><td class="right">    print "  \@ENUMNAME\@            PREFIX_THE_XENUM\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@ENUMSHORT\@           THE_XENUM\n";</td><td> </td><td class="right">    print "  \@ENUMSHORT\@           THE_XENUM\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@ENUMPREFIX\@          PREFIX\n";</td><td> </td><td class="right">    print "  \@ENUMPREFIX\@          PREFIX\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@VALUENAME\@           PREFIX_THE_XVALUE\n";</td><td> </td><td class="right">    print "  \@VALUENAME\@           PREFIX_THE_XVALUE\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@valuenick\@           the-xvalue\n";</td><td> </td><td class="right">    print "  \@valuenick\@           the-xvalue\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0008" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">    print "  \@valuenum\@            the integer value (limited support, Si
nce: 2.26)\n";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@type\@                either enum or flags\n";</td><td> </td><td class="right">    print "  \@type\@                either enum or flags\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@Type\@                either Enum or Flags\n";</td><td> </td><td class="right">    print "  \@Type\@                either Enum or Flags\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@TYPE\@                either ENUM or FLAGS\n";</td><td> </td><td class="right">    print "  \@TYPE\@                either ENUM or FLAGS\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@filename\@            name of current input file\n";</td><td> </td><td class="right">    print "  \@filename\@            name of current input file\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    print "  \@basename\@            base name of the current input file (S
ince: 2.22)\n";</td><td> </td><td class="right">    print "  \@basename\@            base name of the current input file (S
ince: 2.22)\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    exit 0;</td><td> </td><td class="right">    exit 0;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"># production variables:</td><td> </td><td class="right"># production variables:</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $fhead = "";   # output file header</td><td> </td><td class="right">my $fhead = "";   # output file header</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $fprod = "";   # per input file production</td><td> </td><td class="right">my $fprod = "";   # per input file production</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $ftail = "";   # output file trailer</td><td> </td><td class="right">my $ftail = "";   # output file trailer</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $eprod = "";   # per enum text (produced prior to value itarations)</td><td> </td><td class="right">my $eprod = "";   # per enum text (produced prior to value itarations)</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $vhead = "";   # value header, produced before iterating over enum value
s</td><td> </td><td class="right">my $vhead = "";   # value header, produced before iterating over enum value
s</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $vprod = "";   # value text, produced for each enum value</td><td> </td><td class="right">my $vprod = "";   # value text, produced for each enum value</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">my $vtail = "";   # value tail, produced after iterating over enum values</td><td> </td><td class="right">my $vtail = "";   # value tail, produced after iterating over enum values</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0009" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"><span class="delete"># other options</span></td><td> </td><td class="rblock">my $comment_tmpl = <span class="insert">"";   # comment template</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">my $comment_tmpl = <span class="delete">"/* \@comment\@ */";</span></td><td> </td><td class="rblock"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">sub read_template_file {</td><td> </td><td class="right">sub read_template_file {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  my ($file) = @_;</td><td> </td><td class="right">  my ($file) = @_;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  my %tmpl = ('file-header', $fhead,</td><td> </td><td class="right">  my %tmpl = ('file-header', $fhead,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'file-production', $fprod,</td><td> </td><td class="right">             'file-production', $fprod,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'file-tail', $ftail,</td><td> </td><td class="right">             'file-tail', $ftail,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'enumeration-production', $eprod,</td><td> </td><td class="right">             'enumeration-production', $eprod,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'value-header', $vhead,</td><td> </td><td class="right">             'value-header', $vhead,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'value-production', $vprod,</td><td> </td><td class="right">             'value-production', $vprod,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">             'value-tail', $vtail,</td><td> </td><td class="right">             'value-tail', $vtail,</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l4" /><small>skipping to change at</small><em> line 221</em></th><th> </th><th><a name="part-r4" /><small>skipping to change at</small><em> line 224</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">      die "Malformed template file $file\n";</td><td> </td><td class="right">      die "Malformed template file $file\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  }</td><td> </td><td class="right">  }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $fhead = $tmpl{'file-header'};</td><td> </td><td class="right">  $fhead = $tmpl{'file-header'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $fprod = $tmpl{'file-production'};</td><td> </td><td class="right">  $fprod = $tmpl{'file-production'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $ftail = $tmpl{'file-tail'};</td><td> </td><td class="right">  $ftail = $tmpl{'file-tail'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $eprod = $tmpl{'enumeration-production'};</td><td> </td><td class="right">  $eprod = $tmpl{'enumeration-production'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $vhead = $tmpl{'value-header'};</td><td> </td><td class="right">  $vhead = $tmpl{'value-header'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $vprod = $tmpl{'value-production'};</td><td> </td><td class="right">  $vprod = $tmpl{'value-production'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $vtail = $tmpl{'value-tail'};</td><td> </td><td class="right">  $vtail = $tmpl{'value-tail'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">  $comment_tmpl = $tmpl{'comment'};</td><td> </td><td class="right">  $comment_tmpl = $tmpl{'comment'};</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0010" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">  <span class="insert"># default to C-style comments</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">  $comment_tmpl = "/* \@comment\@ */" if $comment_tmpl eq "";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">if (!defined $ARGV[0]) {</td><td> </td><td class="right">if (!defined $ARGV[0]) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    usage;</td><td> </td><td class="right">    usage;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">}</td><td> </td><td class="right">}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">while ($_=$ARGV[0],/^-/) {</td><td> </td><td class="right">while ($_=$ARGV[0],/^-/) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    shift;</td><td> </td><td class="right">    shift;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    last if /^--$/;</td><td> </td><td class="right">    last if /^--$/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    if (/^--template$/)                      { read_template_file (shift); 
}</td><td> </td><td class="right">    if (/^--template$/)                      { read_template_file (shift); 
}</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">    elsif (/^--fhead$/)                      { $fhead = $fhead . shift }</td><td> </td><td class="right">    elsif (/^--fhead$/)                      { $fhead = $fhead . shift }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l5" /><small>skipping to change at</small><em> line 332</em></th><th> </th><th><a name="part-r5" /><small>skipping to change at</small><em> line 338</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       parse_entries (\*ARGV, $ARGV);</td><td> </td><td class="right">       parse_entries (\*ARGV, $ARGV);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       # figure out if this was a flags or enums enumeration</td><td> </td><td class="right">       # figure out if this was a flags or enums enumeration</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!defined $flags) {</td><td> </td><td class="right">       if (!defined $flags) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $flags = $seenbitshift;</td><td> </td><td class="right">           $flags = $seenbitshift;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       # Autogenerate a prefix</td><td> </td><td class="right">       # Autogenerate a prefix</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (!defined $enum_prefix) {</td><td> </td><td class="right">       if (!defined $enum_prefix) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           for (@entries) {</td><td> </td><td class="right">           for (@entries) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0011" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               my $nick = $_-&gt;[<span class="delete">1</span>];</td><td> </td><td class="rblock">               my $nick = $_-&gt;[<span class="insert">2</span>];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if (!defined $nick) {</td><td> </td><td class="right">               if (!defined $nick) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   my $name = $_-&gt;[0];</td><td> </td><td class="right">                   my $name = $_-&gt;[0];</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   if (defined $enum_prefix) {</td><td> </td><td class="right">                   if (defined $enum_prefix) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       my $tmp = ~ ($name ^ $enum_prefix);</td><td> </td><td class="right">                       my $tmp = ~ ($name ^ $enum_prefix);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       ($tmp) = $tmp =~ /(^\xff*)/;</td><td> </td><td class="right">                       ($tmp) = $tmp =~ /(^\xff*)/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       $enum_prefix = $enum_prefix &amp; $tmp;</td><td> </td><td class="right">                       $enum_prefix = $enum_prefix &amp; $tmp;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   } else {</td><td> </td><td class="right">                   } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                       $enum_prefix = $name;</td><td> </td><td class="right">                       $enum_prefix = $name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">                   }</td><td> </td><td class="right">                   }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               }</td><td> </td><td class="right">               }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l6" /><small>skipping to change at</small><em> line 358</em></th><th> </th><th><a name="part-r6" /><small>skipping to change at</small><em> line 364</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $enum_prefix =~ s/_[^_]*$/_/;</td><td> </td><td class="right">               $enum_prefix =~ s/_[^_]*$/_/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           }</td><td> </td><td class="right">           }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       } else {</td><td> </td><td class="right">       } else {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           # canonicalize user defined prefixes</td><td> </td><td class="right">           # canonicalize user defined prefixes</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enum_prefix = uc($enum_prefix);</td><td> </td><td class="right">           $enum_prefix = uc($enum_prefix);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enum_prefix =~ s/-/_/g;</td><td> </td><td class="right">           $enum_prefix =~ s/-/_/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enum_prefix =~ s/(.*)([^_])$/$1$2_/;</td><td> </td><td class="right">           $enum_prefix =~ s/(.*)([^_])$/$1$2_/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       for $entry (@entries) {</td><td> </td><td class="right">       for $entry (@entries) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0012" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">           my ($name,$nick) = @{$entry};</td><td> </td><td class="rblock">           my ($name,$n<span class="insert">um,$n</span>ick) = @{$entry};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            if (!defined $nick) {</td><td> </td><td class="right">            if (!defined $nick) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               ($nick = $name) =~ s/^$enum_prefix//;</td><td> </td><td class="right">               ($nick = $name) =~ s/^$enum_prefix//;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $nick =~ tr/_/-/;</td><td> </td><td class="right">               $nick =~ tr/_/-/;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $nick = lc($nick);</td><td> </td><td class="right">               $nick = lc($nick);</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0013" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               @{$entry} = ($name, $nick);</td><td> </td><td class="rblock">               @{$entry} = ($name, $n<span class="insert">um, $n</span>ick);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            }</td><td> </td><td class="right">            }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       # Spit out the output</td><td> </td><td class="right">       # Spit out the output</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (defined $option_underscore_name) {</td><td> </td><td class="right">       if (defined $option_underscore_name) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enumlong = uc $option_underscore_name;</td><td> </td><td class="right">           $enumlong = uc $option_underscore_name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enumsym = lc $option_underscore_name;</td><td> </td><td class="right">           $enumsym = lc $option_underscore_name;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enumshort = $enumlong;</td><td> </td><td class="right">           $enumshort = $enumlong;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $enumshort =~ s/^[A-Z][A-Z0-9]*_//;</td><td> </td><td class="right">           $enumshort =~ s/^[A-Z][A-Z0-9]*_//;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr bgcolor="gray" ><td></td><th><a name="part-l7" /><small>skipping to change at</small><em> line 454</em></th><th> </th><th><a name="part-r7" /><small>skipping to change at</small><em> line 460</em></th><td></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           if ($flags) { $prod =~ s/\@TYPE\@/FLAGS/g; } else { $prod =~ s/\
@TYPE\@/ENUM/g; }</td><td> </td><td class="right">           if ($flags) { $prod =~ s/\@TYPE\@/FLAGS/g; } else { $prod =~ s/\
@TYPE\@/ENUM/g; }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            $prod =~ s/\\a/\a/g; $prod =~ s/\\b/\b/g; $prod =~ s/\\t/\t/g; 
$prod =~ s/\\n/\n/g;</td><td> </td><td class="right">            $prod =~ s/\\a/\a/g; $prod =~ s/\\b/\b/g; $prod =~ s/\\t/\t/g; 
$prod =~ s/\\n/\n/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            $prod =~ s/\\f/\f/g; $prod =~ s/\\r/\r/g;</td><td> </td><td class="right">            $prod =~ s/\\f/\f/g; $prod =~ s/\\r/\r/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            chomp ($prod);</td><td> </td><td class="right">            chomp ($prod);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">            print "$prod\n";</td><td> </td><td class="right">            print "$prod\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       if (length($vprod)) {</td><td> </td><td class="right">       if (length($vprod)) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           my $prod = $vprod;</td><td> </td><td class="right">           my $prod = $vprod;</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0014" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">            my $next_num = 0;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $prod =~ s/\\a/\a/g; $prod =~ s/\\b/\b/g; $prod =~ s/\\t/\t/g; $
prod =~ s/\\n/\n/g;</td><td> </td><td class="right">           $prod =~ s/\\a/\a/g; $prod =~ s/\\b/\b/g; $prod =~ s/\\t/\t/g; $
prod =~ s/\\n/\n/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           $prod =~ s/\\f/\f/g; $prod =~ s/\\r/\r/g;</td><td> </td><td class="right">           $prod =~ s/\\f/\f/g; $prod =~ s/\\r/\r/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           for (@entries) {</td><td> </td><td class="right">           for (@entries) {</td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0015" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock">               my ($name,$nick) = @{$_};</td><td> </td><td class="rblock">               my ($name,$n<span class="insert">um,$n</span>ick) = @{$_};</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               my $tmp_prod = $prod;</td><td> </td><td class="right">               my $tmp_prod = $prod;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td><a name="diff0016" /></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                <span class="insert">if ($prod =~ /\@valuenum\@/) {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    # only attempt to eval the value if it is requested</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    # this prevents us from throwing errors otherwise</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    if (defined $num) {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        # use sandboxed perl evaluation as a reasonable</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        # approximation to C constant folding</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        $num = $sandbox-&gt;reval ($num);</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        # make sure it parsed to an integer</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        if (!defined $num or $num !~ /^-?\d+$/) {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                            die "Unable to parse enum value '$num'";</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    } else {</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                        $num = $next_num;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    $tmp_prod =~ s/\@valuenum\@/$num/g;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                    $next_num = $num + 1;</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">                }</span></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                           </td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $tmp_prod =~ s/\@VALUENAME\@/$name/g;</td><td> </td><td class="right">               $tmp_prod =~ s/\@VALUENAME\@/$name/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               $tmp_prod =~ s/\@valuenick\@/$nick/g;</td><td> </td><td class="right">               $tmp_prod =~ s/\@valuenick\@/$nick/g;</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if ($flags) { $tmp_prod =~ s/\@type\@/flags/g; } else { $tmp
_prod =~ s/\@type\@/enum/g; }</td><td> </td><td class="right">               if ($flags) { $tmp_prod =~ s/\@type\@/flags/g; } else { $tmp
_prod =~ s/\@type\@/enum/g; }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if ($flags) { $tmp_prod =~ s/\@Type\@/Flags/g; } else { $tmp
_prod =~ s/\@Type\@/Enum/g; }</td><td> </td><td class="right">               if ($flags) { $tmp_prod =~ s/\@Type\@/Flags/g; } else { $tmp
_prod =~ s/\@Type\@/Enum/g; }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               if ($flags) { $tmp_prod =~ s/\@TYPE\@/FLAGS/g; } else { $tmp
_prod =~ s/\@TYPE\@/ENUM/g; }</td><td> </td><td class="right">               if ($flags) { $tmp_prod =~ s/\@TYPE\@/FLAGS/g; } else { $tmp
_prod =~ s/\@TYPE\@/ENUM/g; }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               chomp ($tmp_prod);</td><td> </td><td class="right">               chomp ($tmp_prod);</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">               print "$tmp_prod\n";</td><td> </td><td class="right">               print "$tmp_prod\n";</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">           }</td><td> </td><td class="right">           }</td><td class="lineno" valign="top"></td></tr>
      <tr><td class="lineno" valign="top"></td><td class="left">       }</td><td> </td><td class="right">       }</td><td class="lineno" valign="top"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr bgcolor="gray"><th colspan="5" align="center"><a name="end">&nbsp;End of changes. 16 change blocks.&nbsp;</a></th></tr>
     <tr class="stats"><td></td><th><i>10 lines changed or deleted</i></th><th><i> </i></th><th><i>37 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.41. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
